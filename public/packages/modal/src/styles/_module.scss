////
/// Modal Module
/// @group modal
////

#{ns(modal)} {
  // reset dialog
  border: none;
  color: inherit;
  visibility: hidden;
  opacity: 0;
  @include padding(0);
  @include margin(0);
  @include display-flex(null, flex-end, center);
  @include fixed(0, 0, 0, 0, 100%, 100%);
  pointer-events: all;
  z-index: z-index(modal);
  // transition in/out
  transition: opacity 0.3s, visibility 0.3s;

  &:focus {
    outline: none;
  }

  @include respond-from(md) {
    align-items: center;
  }

  &--expanded {
    // transition in/out
    visibility: inherit;
    opacity: 1;
    @include size(100%, 100%);
    transition: opacity 0.3s, visibility 0.3s;
  }

  #{ns(container)},
  #{ns(container--fluid)} {
    @include relative;
    @include size(100%, auto);
    pointer-events: none;
    @include padding-top(8v);
    @include padding(10vh 0,md);
    max-height: 100%;

    #{ns(grid-row)} {
      @include margin(0 -4v);
      @include margin(0,md);
    }
  }

  @include body {
    overflow-y: auto;
    flex: 1 1 auto;
    @include padding(0 8v);
    pointer-events: all;
    max-height: calc(100vh - 2rem);
    @include shadow(md);

    @include respond-from(md) {
      max-height: 80vh;
    }

    #{ns(modal)}__header {
      @include padding-left(0);
      @include padding-right(0);
      @include margin-right(-4v, md);
    }
  }

  &__header {
    flex: auto 0 0;
    @include display-flex(null, center, flex-end);
    @include padding(4v 4v 2v 4v);
    @include padding(4v 8v 2v 8v, md);
  }

  &__content {
    @include margin-bottom(14v);
    @include margin-bottom(16v, md);
  }

  &__footer {
    flex: auto 0 0;
    @include display-flex(null);
    @include padding(4v);
    @include padding(8v, md);
    @include margin(-10v -4v 0);
    @include margin(-12v -8v 0, md);
    @include sticky(null,null,0);
    transition: box-shadow 0.3s;
    z-index: z-index(modal-footer-focus);

    #{ns-group(btns)} {
      margin-bottom: -1rem;
      width: calc(100% + #{space(4v)});
    }
  }

  &__title {
    @include title-style('h4');
    @include font-weight('bold');

    [class*="#{$prefix}-fi-"] {
      @include margin-right(2v);
    }

    @include margin-top(0);
    @include margin-bottom(2v);
    @include margin-bottom(4v, md);
  }

  /**
  * Modifier pour fixer la modale en haut en mobile (par defaut en bas)
  */
  &--top {
    align-items: flex-start;
  }
}
