{"version":3,"file":"accordions.module.min.js","sources":["../../packages/core/generated/scripts/config.js","../../packages/core/api.js","../../packages/accordions/src/scripts/accordion/constants.js","../../packages/accordions/src/scripts/accordion/accordions-group.js","../../packages/accordions/index.js","../../packages/accordions/src/scripts/module.js"],"sourcesContent":["export const prefix = 'rf';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || {};\nwindow[namespace] = api;\nexport default api;\n","import api from '../../../api.js';\n\nconst ACCORDIONS_GROUP = api.ns('accordions-group');\nconst ACCORDION_ASCENDANT = api.ns('accordion');\n\nexport { ACCORDIONS_GROUP, ACCORDION_ASCENDANT };\n","import api from '../../../api.js';\nimport { ACCORDIONS_GROUP } from './constants.js';\n\nclass AccordionsGroup extends api.CollapsesGroup {\n  // constructor (id, element) {\n  //   super(id, element);\n  //   // this._attachEvents();\n  // }\n\n  _attachEvents () {\n    this.keyEvents = new api.KeyListener(this.element);\n    this.keyEvents.down(api.KeyListener.DOWN, this.arrowDownPress.bind(this), true, true);\n    this.keyEvents.down(api.KeyListener.UP, this.arrowUpPress.bind(this), true, true);\n    this.keyEvents.down(api.KeyListener.HOME, this.homePress.bind(this), true, true);\n    this.keyEvents.down(api.KeyListener.END, this.endPress.bind(this), true, true);\n  }\n\n  get focusIndex () {\n    for (let i = 0; i < this.members.length; i++) if (this.members[i].buttonHasFocus) return i;\n    return -1;\n  }\n\n  /**\n   * Selectionne l'element suivant de la liste si on est sur un bouton\n   * Si on est à la fin on retourne au début\n   */\n  arrowDownPress () {\n    let index = this.focusIndex;\n    if (index === -1) return;\n    index++;\n    if (index >= this.length) index = 0;\n    this.members[index].focus();\n  };\n\n  /**\n   * Selectionne l'element précédent de la liste si on est sur un bouton\n   * Si on est au debut retourne a la fin\n   */\n  arrowUpPress () {\n    let index = this.focusIndex;\n    if (index === -1) return;\n    index--;\n    if (index < 0) index = this.length - 1;\n    this.members[index].focus();\n  };\n\n  /**\n   * Selectionne le permier element de la liste si on est sur un bouton\n   */\n  homePress () {\n    if (this.focusIndex === -1) return;\n    this.members[0].focus();\n  };\n\n  /**\n   * Selectionne le dernier element de la liste si on est sur un bouton\n   */\n  endPress () {\n    if (this.focusIndex === -1) return;\n    this.members[this.length - 1].focus();\n  };\n\n  static get selector () { return ACCORDIONS_GROUP; }\n\n  apply () {\n    super.apply();\n    if (this.current !== null) this.current.focus();\n  }\n}\n\nexport { AccordionsGroup };\n","import api from './api.js';\nimport { AccordionsGroup } from './src/scripts/accordion/accordions-group.js';\n\napi.AccordionsGroup = AccordionsGroup;\n","import api from '../../api.js';\nimport { ACCORDION_ASCENDANT } from './accordion/constants.js';\nimport { AccordionsGroup } from './accordion/accordions-group.js';\n\napi.CollapsesGroup.register(ACCORDION_ASCENDANT, AccordionsGroup);\n"],"names":["api","window","ACCORDIONS_GROUP","ns","ACCORDION_ASCENDANT","AccordionsGroup","CollapsesGroup","[object Object]","this","keyEvents","KeyListener","element","down","DOWN","arrowDownPress","bind","UP","arrowUpPress","HOME","homePress","END","endPress","focusIndex","i","members","length","buttonHasFocus","index","focus","selector","super","apply","current","register"],"mappings":";AACO,MCCDA,EAAMC,OAAgB,MAAK,GACjCA,OAAgB,KAAID,ECDpB,MAAME,EAAmBF,EAAIG,GAAG,oBAC1BC,EAAsBJ,EAAIG,GAAG,aCAnC,MAAME,UAAwBL,EAAIM,eAMhCC,gBACEC,KAAKC,UAAY,IAAIT,EAAIU,YAAYF,KAAKG,SAC1CH,KAAKC,UAAUG,KAAKZ,EAAIU,YAAYG,KAAML,KAAKM,eAAeC,KAAKP,OAAO,GAAM,GAChFA,KAAKC,UAAUG,KAAKZ,EAAIU,YAAYM,GAAIR,KAAKS,aAAaF,KAAKP,OAAO,GAAM,GAC5EA,KAAKC,UAAUG,KAAKZ,EAAIU,YAAYQ,KAAMV,KAAKW,UAAUJ,KAAKP,OAAO,GAAM,GAC3EA,KAAKC,UAAUG,KAAKZ,EAAIU,YAAYU,IAAKZ,KAAKa,SAASN,KAAKP,OAAO,GAAM,GAG3Ec,iBACE,IAAK,IAAIC,EAAI,EAAGA,EAAIf,KAAKgB,QAAQC,OAAQF,IAAK,GAAIf,KAAKgB,QAAQD,GAAGG,eAAgB,OAAOH,EACzF,OAAQ,EAOVhB,iBACE,IAAIoB,EAAQnB,KAAKc,YACF,IAAXK,IACJA,IACIA,GAASnB,KAAKiB,SAAQE,EAAQ,GAClCnB,KAAKgB,QAAQG,GAAOC,SAOtBrB,eACE,IAAIoB,EAAQnB,KAAKc,YACF,IAAXK,IACJA,IACIA,EAAQ,IAAGA,EAAQnB,KAAKiB,OAAS,GACrCjB,KAAKgB,QAAQG,GAAOC,SAMtBrB,aAC2B,IAArBC,KAAKc,YACTd,KAAKgB,QAAQ,GAAGI,QAMlBrB,YAC2B,IAArBC,KAAKc,YACTd,KAAKgB,QAAQhB,KAAKiB,OAAS,GAAGG,QAGhCC,sBAAyB,OAAO3B,EAEhCK,QACEuB,MAAMC,QACe,OAAjBvB,KAAKwB,SAAkBxB,KAAKwB,QAAQJ,SC/D5C5B,EAAIK,gBAAkBA,ECCtBL,EAAIM,eAAe2B,SAAS7B,EAAqBC"}