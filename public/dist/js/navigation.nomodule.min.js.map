{"version":3,"file":"navigation.nomodule.min.js","sources":["../../packages/core/generated/scripts/config.js","../../packages/core/api.js","../../packages/navigation/src/scripts/navigation/constants.js","../../packages/navigation/src/scripts/navigation/navigation.js","../../packages/navigation/index.js","../../packages/navigation/src/scripts/module.js"],"sourcesContent":["export const prefix = 'rf';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || {};\nwindow[namespace] = api;\nexport default api;\n","import api from '../../../api.js';\n\nconst NAVIGATION_CLASS = api.ns('nav');\nconst NAVIGATION_LIST_CLASS = api.ns('nav__list');\nconst NAVIGATION_ITEM_CLASS = api.ns('nav__item');\nconst NAVIGATION_ITEM_RIGHT_CLASS = api.ns('nav__item--align-right');\nconst NAVIGATION_MENU_CLASS = api.ns('menu');\n\nexport { NAVIGATION_CLASS, NAVIGATION_LIST_CLASS, NAVIGATION_MENU_CLASS, NAVIGATION_ITEM_CLASS, NAVIGATION_ITEM_RIGHT_CLASS };\n","import api from '../../../api.js';\nimport {\n  NAVIGATION_CLASS,\n  NAVIGATION_ITEM_CLASS,\n  NAVIGATION_LIST_CLASS,\n  NAVIGATION_MENU_CLASS,\n  NAVIGATION_ITEM_RIGHT_CLASS\n} from './constants';\n\nclass Navigation extends api.CollapsesGroup {\n  constructor (id, element) {\n    super(id, element);\n\n    this.menus = [];\n\n    this.navList = element.querySelector(`.${NAVIGATION_LIST_CLASS}`);\n\n    document.addEventListener('focusout', this.focusOut.bind(this));\n    window.addEventListener('resize', this.resize.bind(this));\n    window.addEventListener('orientationchange', this.resize.bind(this));\n    this.resize();\n  }\n\n  static get selector () { return NAVIGATION_CLASS; }\n\n  add (member) {\n    super.add(member);\n\n    if (member.element.classList.contains(NAVIGATION_MENU_CLASS)) {\n      this.menus.push(new NavigationMenu(member, this.navList.getBoundingClientRect().right));\n    }\n  }\n\n  focusOut (e) {\n    requestAnimationFrame(() => {\n      if (this.current !== null && !this.current.hasFocus) this.index = -1;\n    });\n  }\n\n  get index () { return super.index; }\n\n  set index (value) {\n    if (value === -1 && this.current !== null && this.current.hasFocus) this.current.focus();\n    super.index = value;\n  }\n\n  resize () {\n    const right = this.navList.getBoundingClientRect().right;\n\n    for (const menu of this.menus) menu.place(right);\n  }\n}\n\nclass NavigationMenu {\n  constructor (collapse, right) {\n    this.initialize(collapse);\n    this.place(right);\n  }\n\n  initialize (collapse) {\n    this.element = collapse.element;\n\n    for (const button of collapse.buttons) {\n      if (!button.hasAttribute) continue;\n      this.button = button.element;\n      break;\n    }\n\n    let item = this.element.parentElement;\n    while (item) {\n      if (item.classList.contains(NAVIGATION_ITEM_CLASS)) {\n        this.item = item;\n        break;\n      }\n      item = item.parentElement;\n    }\n  }\n\n  place (right) {\n    const styles = getComputedStyle(this.element);\n    const width = parseFloat(styles.width);\n    const left = this.button.getBoundingClientRect().left;\n\n    if (left + width > right) api.addClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n    else api.removeClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n  }\n}\n\nexport { Navigation };\n","import api from './api.js';\nimport { Navigation } from './src/scripts/navigation/navigation';\n\napi.Navigation = Navigation;\n","import api from '../../api.js';\nimport { NAVIGATION_CLASS } from './navigation/constants.js';\nimport { Navigation } from './navigation/navigation.js';\n\napi.CollapsesGroup.register(NAVIGATION_CLASS, Navigation);\n"],"names":["const","api","window","NAVIGATION_CLASS","ns","NAVIGATION_LIST_CLASS","NAVIGATION_ITEM_CLASS","NAVIGATION_ITEM_RIGHT_CLASS","NAVIGATION_MENU_CLASS","Navigation","id","element","super","this","menus","navList","querySelector","document","addEventListener","focusOut","bind","resize","staticAccessors","selector","add","member","classList","contains","push","NavigationMenu","getBoundingClientRect","right","e","requestAnimationFrame","current","hasFocus","index","prototypeAccessors","value","focus","place","CollapsesGroup","collapse","initialize","buttons","button","hasAttribute","let","item","parentElement","styles","getComputedStyle","width","parseFloat","left","addClass","removeClass","register"],"mappings":";yBACOA,ICCDC,EAAMC,OAAgB,MAAK,GACjCA,OAAgB,KAAID,ECDpBD,IAAMG,EAAmBF,EAAIG,GAAG,OAC1BC,EAAwBJ,EAAIG,GAAG,aAC/BE,EAAwBL,EAAIG,GAAG,aAC/BG,EAA8BN,EAAIG,GAAG,0BACrCI,EAAwBP,EAAIG,GAAG,QCG/BK,cACJ,WAAaC,EAAIC,GACfC,YAAMF,EAAIC,GAEVE,KAAKC,MAAQ,GAEbD,KAAKE,QAAUJ,EAAQK,kBAAkBX,GAEzCY,SAASC,iBAAiB,WAAYL,KAAKM,SAASC,KAAKP,OACzDX,OAAOgB,iBAAiB,SAAUL,KAAKQ,OAAOD,KAAKP,OACnDX,OAAOgB,iBAAiB,oBAAqBL,KAAKQ,OAAOD,KAAKP,OAC9DA,KAAKQ,sKAGPC,EAAWC,wBAAc,OAAOpB,eAEhCqB,aAAKC,GACHb,YAAMY,cAAIC,GAENA,EAAOd,QAAQe,UAAUC,SAASnB,IACpCK,KAAKC,MAAMc,KAAK,IAAIC,EAAeJ,EAAQZ,KAAKE,QAAQe,wBAAwBC,qBAIpFZ,kBAAUa,cACRC,kCACuB,OAAjBpB,EAAKqB,SAAqBrB,EAAKqB,QAAQC,WAAUtB,EAAKuB,OAAS,OAIvEC,EAAID,qBAAW,OAAOxB,YAAMwB,OAE5BC,EAAID,mBAAOE,IACM,IAAXA,GAAiC,OAAjBzB,KAAKqB,SAAoBrB,KAAKqB,QAAQC,UAAUtB,KAAKqB,QAAQK,QACjF3B,YAAMwB,MAAQE,eAGhBjB,kBAGE,IAFArB,IAAM+B,EAAQlB,KAAKE,QAAQe,wBAAwBC,YAEhClB,KAAKC,4BAAY0B,MAAMT,4EAxCrB9B,EAAIwC,gBA4CvBZ,EACJ,SAAaa,EAAUX,GACrBlB,KAAK8B,WAAWD,GAChB7B,KAAK2B,MAAMT,gBAGbY,oBAAYD,GACV7B,KAAKF,QAAU+B,EAAS/B,QAExB,cAAqB+B,EAASE,wBAAS,CAAlC5C,IAAM6C,OACT,GAAKA,EAAOC,aAAZ,CACAjC,KAAKgC,OAASA,EAAOlC,QACrB,OAIF,IADAoC,IAAIC,EAAOnC,KAAKF,QAAQsC,cACjBD,GAAM,CACX,GAAIA,EAAKtB,UAAUC,SAASrB,GAAwB,CAClDO,KAAKmC,KAAOA,EACZ,MAEFA,EAAOA,EAAKC,4BAIhBT,eAAOT,GACL/B,IAAMkD,EAASC,iBAAiBtC,KAAKF,SAC/ByC,EAAQC,WAAWH,EAAOE,OACnBvC,KAAKgC,OAAOf,wBAAwBwB,KAEtCF,EAAQrB,EAAO9B,EAAIsD,SAAS1C,KAAKmC,KAAMzC,GAC7CN,EAAIuD,YAAY3C,KAAKmC,KAAMzC,ICjFpCN,EAAIQ,WAAaA,ECCjBR,EAAIwC,eAAegB,SAAStD,EAAkBM"}