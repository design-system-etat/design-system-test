{"version":3,"file":"dsfr.nomodule.min.js","sources":["../../packages/core/generated/scripts/config.js","../../packages/core/api.js","../../packages/core/src/scripts/global/namespace.js","../../packages/core/src/scripts/manipulation/classes.js","../../packages/core/src/scripts/engine/render/renderer.js","../../packages/core/src/scripts/engine/engine.js","../../packages/core/src/scripts/global/initializer.js","../../packages/core/src/scripts/key-listener/key-listener.js","../../packages/core/src/scripts/disclosure/constants.js","../../packages/core/src/scripts/disclosure/disclosures-group.js","../../packages/core/src/scripts/disclosure/disclosure-button.js","../../packages/core/src/scripts/disclosure/disclosure.js","../../packages/core/src/scripts/disclosure/disclosure-types.js","../../packages/core/src/scripts/collapse/collapse-button.js","../../packages/core/src/scripts/collapse/collapses-group.js","../../packages/core/src/scripts/collapse/constants.js","../../packages/core/src/scripts/collapse/collapse.js","../../packages/core/src/scripts/manipulation/size.js","../../packages/core/index.js","../../packages/core/src/scripts/module.js","../../packages/core/src/scripts/collapse/build.js","../../packages/accordions/src/scripts/accordion/constants.js","../../packages/accordions/src/scripts/accordion/accordions-group.js","../../packages/accordions/index.js","../../packages/accordions/src/scripts/module.js","../../packages/buttons/src/scripts/buttons/constants.js","../../packages/buttons/src/scripts/module.js","../../packages/buttons/src/scripts/buttons/build.js","../../packages/modal/src/scripts/modal/constants.js","../../packages/modal/src/scripts/modal/focus-trap.js","../../packages/modal/src/scripts/modal/modals-group.js","../../packages/modal/src/scripts/modal/modal-button.js","../../packages/modal/src/scripts/modal/modal.js","../../packages/modal/index.js","../../packages/modal/src/scripts/module.js","../../packages/modal/src/scripts/modal/build.js","../../packages/navigation/src/scripts/navigation/constants.js","../../packages/navigation/src/scripts/navigation/navigation.js","../../packages/navigation/index.js","../../packages/navigation/src/scripts/module.js","../../packages/schemes/src/scripts/scheme/constants.js","../../packages/schemes/src/scripts/scheme/scheme.js","../../packages/schemes/index.js","../../packages/schemes/src/scripts/switch-theme/constants.js","../../packages/schemes/src/scripts/switch-theme/switch-theme.js","../../packages/schemes/src/scripts/module.js","../../packages/schemes/src/scripts/scheme/build.js","../../packages/schemes/src/scripts/switch-theme/build.js","../../packages/sidemenu/src/scripts/sidemenu/constants.js","../../packages/sidemenu/src/scripts/module.js","../../packages/table/src/scripts/table/constants.js","../../packages/table/src/scripts/table/table.js","../../packages/table/index.js","../../packages/table/src/scripts/table/build.js","../../packages/table/src/scripts/module.js","../../packages/tabs/src/scripts/tabs/tab-button.js","../../packages/tabs/src/scripts/tabs/constants.js","../../packages/tabs/src/scripts/tabs/tabs-group.js","../../packages/tabs/src/scripts/tabs/tab.js","../../packages/tabs/index.js","../../packages/tabs/src/scripts/module.js","../../packages/tabs/src/scripts/tabs/build.js","../../packages/header/src/scripts/header/constants.js","../../packages/header/src/scripts/header/header.js","../../packages/header/index.js","../../packages/header/src/scripts/module.js","../../packages/header/src/scripts/header/build.js"],"sourcesContent":["export const prefix = 'rf';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || {};\nwindow[namespace] = api;\nexport default api;\n","import { prefix } from '../../../generated/scripts/config.js';\n\nexport const ns = (name) => {\n  return `${prefix}-${name}`;\n};\n\nns.selector = (name, notation) => {\n  if (notation === undefined) notation = '.';\n  return `${notation}${ns(name)}`;\n};\n\nns.attr = (name, quoted, value) => {\n  return `data-${ns(name)}`;\n};\n\nns.attr.selector = (name, value) => {\n  let result = ns.attr(name);\n  if (value !== undefined) result += `=\"${value}\"`;\n  return `[${result}]`;\n};\n","const modifiyClass = (element, className, remove) => {\n  if (className.charAt(0) === '.') className = className.substr(1);\n  const classNames = element.className.split(' ');\n  const index = classNames.indexOf(className);\n  if (remove === true) {\n    if (index > -1) classNames.splice(index, 1);\n  } else if (index === -1) classNames.push(className);\n  element.className = classNames.join(' ');\n};\n\nconst addClass = (element, className) => modifiyClass(element, className);\n\nexport { addClass };\n\nconst removeClass = (element, className) => modifiyClass(element, className, true);\n\nexport { removeClass };\n","class Renderer {\n  constructor () {\n    this.closures = [];\n    this.nexts = [];\n    this.rendering = this.render.bind(this);\n    this.render();\n  }\n\n  add (closure) {\n    this.closures.push(closure);\n    const remove = () => {\n      const index = this.closures.indexOf(closure);\n      if (index !== -1) this.closures.splice(index, 1);\n    };\n    return remove;\n  }\n\n  next (closure) {\n    this.nexts.push(closure);\n  }\n\n  render () {\n    window.requestAnimationFrame(this.rendering);\n    for (const closure of this.closures) closure.call();\n    const nexts = this.nexts.slice();\n    this.nexts.length = 0;\n    for (const closure of nexts) closure.call();\n  }\n}\n\nexport { Renderer };\n","import { Renderer } from './render/renderer';\n\n// TODO: initializer et renderer en 1, avec muttation observer pour ajouter et retirer les instances des objets attendus en fonctions de selecteurs spécifiques\nclass Engine {\n  constructor () {\n    this.renderer = new Renderer();\n    // this.instantier = new Instancier();\n  }\n\n  register (selector, factory) {\n\n  }\n\n  start () {\n    // this.renderer.start();\n  }\n\n  stop () {\n    // this.renderer.stop();\n  }\n}\n\nconst engine = new Engine();\n\nexport default engine;\n","class Initializer {\n  constructor (selector, builders) {\n    this.selector = selector;\n    this.builders = builders;\n    this.instances = [];\n\n    if (document.readyState !== 'loading') window.requestAnimationFrame(this.start.bind(this));\n    else document.addEventListener('DOMContentLoaded', this.start.bind(this));\n  }\n\n  start () {\n    if (this.instances.length > 0) return;\n\n    if (document.querySelectorAll(this.selector).length > 0) {\n      for (let i = 0; i < this.builders.length; i++) {\n        this.instances.push(this.builders[i]());\n      }\n    }\n  }\n}\n\nexport { Initializer };\n","/**\n * Utilitaire de gestion des évenements clavier\n * Utiliser KeyListener.add() pour ajouter un event listener\n */\nclass KeyListener {\n  constructor (element) {\n    this.element = element;\n    this.collections = {};\n  }\n\n  /**\n   * key: la touche de clavier\n   * closure: la function à appliquer\n   * type: event type, optionnel, si c'est en down, up ou press\n   * stopPropagation: Boolean, permet d'empêcher le comportement par default de l'evenement\n   */\n  _add (type, action) {\n    if (this.collections[type] === undefined) this.collections[type] = new KeyActionCollection(type, this.element);\n    this.collections[type].add(action);\n  }\n\n  down (key, closure, preventDefault, stopPropagation) {\n    this._add('down', new KeyAction(key, closure, preventDefault, stopPropagation));\n  }\n\n  up (key, closure, preventDefault, stopPropagation) {\n    this._add('up', new KeyAction(key, closure, preventDefault, stopPropagation));\n  }\n\n  dispose () {\n    for (const collection of this.collections) collection.dispose();\n    this.types = null;\n  }\n}\n\nclass KeyActionCollection {\n  constructor (type, element) {\n    this.type = type;\n    this.element = element;\n    this.actions = [];\n    this.binding = this.handle.bind(this);\n    this.element.addEventListener('key' + type, this.binding);\n  }\n\n  add (action) {\n    this.actions.push(action);\n  }\n\n  handle (e) {\n    for (const action of this.actions) action.handle(e);\n  }\n\n  dispose () {\n    this.element.removeEventListener('key' + this.type, this.binding);\n    this.actions = null;\n  }\n}\n\nclass KeyAction {\n  constructor (key, closure, preventDefault, stopPropagation) {\n    this.key = key;\n    this.closure = closure;\n    this.preventDefault = preventDefault === true;\n    this.stopPropagation = stopPropagation === true;\n  }\n\n  handle (e) {\n    if (e.keyCode === this.key) {\n      this.closure(e);\n      if (this.preventDefault) {\n        e.preventDefault();\n      }\n      if (this.stopPropagation) {\n        e.stopPropagation();\n      }\n    }\n  }\n}\n\nKeyListener.TAB = 9;\nKeyListener.ESCAPE = 27;\nKeyListener.END = 35;\nKeyListener.HOME = 36;\nKeyListener.LEFT = 37;\nKeyListener.UP = 38;\nKeyListener.RIGHT = 39;\nKeyListener.DOWN = 40;\n\nexport { KeyListener };\n","import { ns } from '../global/namespace.js';\n\nconst GROUP_ATTR = ns.attr('group');\n\nexport { GROUP_ATTR };\n","import { GROUP_ATTR } from './constants.js';\n\nconst groups = [];\n\nclass DisclosuresGroup {\n  constructor (id, element) {\n    this.id = id;\n    this.element = element;\n    this.members = [];\n    this._index = -1;\n    this._current = null;\n    groups.push(this);\n  }\n\n  static getGroupById (id) {\n    for (const group of groups) if (group.constructor === this && group.id === id) return group;\n    return new this(id);\n  }\n\n  static getGroupByElement (element) {\n    for (const group of groups) if (group.element === element) return group;\n    return new this(false, element);\n  }\n\n  static groupById (member, groupConstructor) {\n    const id = member.element.getAttribute(GROUP_ATTR);\n    if (id === null) return;\n\n    const group = groupConstructor.getGroupById(id);\n    group.add(member);\n  }\n\n  static groupByParent (member, GroupConstructor, groupSelector) {\n    if (groupSelector === undefined) groupSelector = GroupConstructor.selector;\n    if (groupSelector === '') return;\n    let element = member.element.parentElement;\n\n    while (element) {\n      if (element.classList.contains(member.constructor.selector)) return;\n\n      if (element.classList.contains(groupSelector)) {\n        const group = GroupConstructor.getGroupByElement(element);\n        group.add(member);\n        return;\n      }\n      element = element.parentElement;\n    }\n  }\n\n  static get selector () { return ''; }\n\n  add (member) {\n    if (this.members.indexOf(member) !== -1) return;\n    this.members.push(member);\n    member.setGroup(this);\n\n    switch (true) {\n      case this.current !== null:\n      case !member.disclosed:\n        member.apply(false, true);\n        break;\n\n      default:\n        this._current = member;\n        this._index = this.members.indexOf(member);\n        member.apply(true, true);\n    }\n  }\n\n  get length () { return this.members.length; }\n\n  get index () { return this._index; }\n\n  set index (value) {\n    if (value < -1 || value >= this.length || this._index === value) return;\n    if (this.current !== null) this.current.apply(false);\n    this._index = value;\n    this._current = this._index > -1 ? this.members[this._index] : null;\n    if (this.current !== null) this.current.apply(true);\n    this.apply();\n  }\n\n  get current () { return this._current; }\n\n  set current (member) {\n    this.index = this.members.indexOf(member);\n  }\n\n  apply () {}\n}\n\nexport { DisclosuresGroup };\n","class DisclosureButton {\n  constructor (element, disclosure) {\n    this.element = element;\n    this.disclosure = disclosure;\n    this.hasAttribute = this.element.hasAttribute(this.disclosure.attributeName);\n    this.element.addEventListener('click', this.click.bind(this));\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observe();\n  }\n\n  observe () {\n    this.observer.observe(this.element, { attributes: true });\n  }\n\n  click (e) {\n    this.disclosure.change(this.hasAttribute);\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === this.disclosure.attributeName) this.disclosure.change(this.disclosed);\n    });\n  }\n\n  apply (value) {\n    if (!this.hasAttribute) return;\n    if (this.observer) this.observer.disconnect();\n    this.element.setAttribute(this.disclosure.attributeName, value);\n    if (this.observer) this.observe();\n  }\n\n  get disclosed () {\n    return this.element.getAttribute(this.disclosure.attributeName) === 'true';\n  }\n}\n\nexport { DisclosureButton };\n","import { DisclosuresGroup } from './disclosures-group.js';\nimport { DisclosureButton } from './disclosure-button.js';\nimport { addClass, removeClass } from '../manipulation/classes.js';\nimport { ns } from '../global/namespace.js';\n\nconst disclosures = [];\n\nclass Disclosure {\n  constructor (element) {\n    this.element = element;\n    this.id = element.id;\n    this.buttons = [];\n    this.disclosed = null;\n    this._selector = this.constructor.selector;\n    this.modifier = this._selector + '--' + this.type.id;\n    this.attributeName = this.type.aria ? 'aria-' + this.type.id : ns.attr(this.type.id);\n\n    const buttons = document.querySelectorAll(this.type.aria ? `[aria-controls=\"${this.id}\"]` : ns.attr.selector('controls', this.id));\n\n    if (buttons.length > 0) for (let i = 0; i < buttons.length; i++) this.addButton(buttons[i]);\n\n    this.disclosed = this.disclosed === true;\n    this.apply(this.disclosed, true);\n\n    this.group();\n  }\n\n  group () {\n    DisclosuresGroup.groupById(this, this.GroupConstructor);\n    DisclosuresGroup.groupByParent(this, this.GroupConstructor);\n  }\n\n  static build (from) {\n    const elements = Array.prototype.slice.call(from.querySelectorAll(`.${this.selector}`));\n\n    for (const element of elements) disclosures.push(new this(element));\n  }\n\n  get type () { return this.constructor.type; }\n\n  static get type () { return null; }\n\n  static get selector () { return ''; }\n\n  addButton (element) {\n    const button = this.buttonFactory(element);\n    if (button.hasAttribute) {\n      if (this.disclosed === null) {\n        this.disclosed = button.disclosed;\n      } else button.apply(this.disclosed);\n    }\n    this.buttons.push(button);\n  }\n\n  get GroupConstructor () { return DisclosuresGroup; }\n\n  buttonFactory (button) {\n    return new DisclosureButton(button, this);\n  }\n\n  disclose () {\n    if (this.disclosed) return;\n\n    if (this.group !== undefined) this.group.current = this;\n    this.apply(true);\n  }\n\n  conceal () {\n    if (!this.disclosed) return;\n\n    if (this.group !== undefined) this.group.current = null;\n    this.apply(false);\n  }\n\n  apply (value, initial) {\n    this.disclosed = value;\n    if (value) addClass(this.element, this.modifier);\n    else removeClass(this.element, this.modifier);\n    for (let i = 0; i < this.buttons.length; i++) this.buttons[i].apply(value);\n    if (!value) for (const disclosure of disclosures) if (disclosure !== this && this.element.contains(disclosure.element)) disclosure.reset();\n  }\n\n  reset () {}\n\n  change (hasAttribute) {\n    if (!this.constructor.type.canConceal) this.disclose();\n    else {\n      switch (true) {\n        case !hasAttribute:\n        case this.disclosed:\n          this.conceal();\n          break;\n\n        default:\n          this.disclose();\n      }\n    }\n  }\n\n  setGroup (group) {\n    this.group = group;\n  }\n\n  get hasFocus () {\n    if (this.element === document.activeElement) return true;\n    if (this.element.querySelectorAll(':focus').length > 0) return true;\n    if (this.buttons.some((button) => { return button.hasFocus; })) return true;\n    return false;\n  }\n\n  focus () {\n    for (let i = 0; i < this.buttons.length; i++) {\n      const button = this.buttons[i];\n      if (button.hasAttribute) {\n        button.element.focus();\n        return;\n      }\n    }\n  }\n}\n\nexport { Disclosure };\n","export const DISCLOSURE_TYPES = {\n  expand: {\n    id: 'expanded',\n    aria: true,\n    canConceal: true\n  },\n  select: {\n    id: 'selected',\n    aria: true,\n    canConceal: false\n  }\n};\n","import { DisclosureButton } from '../disclosure/disclosure-button.js';\n\n/**\n * CollapseButton correspond au bouton cliquable qui change le panel\n * CollapseButton étend de DisclosureButton qui ajoute/enelve l'attribut aria-expanded\n */\nclass CollapseButton extends DisclosureButton {\n  get hasFocus () {\n    return this.element === document.activeElement;\n  }\n}\n\nexport { CollapseButton };\n","import { DisclosuresGroup } from '../disclosure/disclosures-group.js';\n\nconst ascendants = {};\n\nclass CollapsesGroup extends DisclosuresGroup {\n  get hasFocus () {\n    if (this.current === undefined) return null;\n    return this.current.hasFocus;\n  }\n\n  static register (ascendant, groupSelector) {\n    ascendants[ascendant] = groupSelector;\n  }\n\n  static get ascendants () { return ascendants; };\n}\n\nexport { CollapsesGroup };\n","import { ns } from '../global/namespace.js';\n\nconst COLLAPSE_CLASS = ns('collapse');\n\nexport { COLLAPSE_CLASS };\n","import { Disclosure } from '../disclosure/disclosure.js';\nimport { DisclosuresGroup } from '../disclosure/disclosures-group.js';\nimport { CollapseButton } from './collapse-button.js';\nimport { CollapsesGroup } from './collapses-group.js';\nimport { COLLAPSE_CLASS } from './constants.js';\nimport { DISCLOSURE_TYPES } from '../disclosure/disclosure-types.js';\n\n/**\n * Tab coorespond au panel d'un élement Tabs (tab panel)\n * Tab étend disclosure qui ajoute/enleve le modifier --selected,\n * et ajoute/eleve l'attribut hidden, sur le panel\n */\nclass Collapse extends Disclosure {\n  constructor (element) {\n    super(element);\n\n    element.addEventListener('transitionend', this.transitionend.bind(this));\n  }\n\n  group () {\n    for (const ascendant in CollapsesGroup.ascendants) {\n      let element = this.element.parentElement;\n\n      while (element) {\n        if (element.classList.contains(ascendant)) {\n          if (typeof CollapsesGroup.ascendants[ascendant] === 'string') {\n            DisclosuresGroup.groupByParent(this, CollapsesGroup, CollapsesGroup.ascendants[ascendant]);\n          } else {\n            DisclosuresGroup.groupByParent(this, CollapsesGroup.ascendants[ascendant]);\n          }\n          return;\n        }\n\n        element = element.parentElement;\n      }\n    }\n\n    super.group();\n  }\n\n  get GroupConstructor () { return CollapsesGroup; }\n\n  buttonFactory (element) {\n    return new CollapseButton(element, this);\n  }\n\n  static get type () { return DISCLOSURE_TYPES.expand; }\n  static get selector () { return COLLAPSE_CLASS; }\n\n  transitionend (e) {\n    if (!this.disclosed) this.element.style.maxHeight = '';\n  }\n\n  apply (value, initial) {\n    if (value) this.element.style.maxHeight = 'none';\n    this.element.style.setProperty('--collapser', 'none');\n    const height = this.element.offsetHeight;\n    this.element.style.setProperty('--collapse', -height + 'px');\n    this.element.style.setProperty('--collapser', '');\n\n    window.requestAnimationFrame(() => super.apply(value, initial));\n  }\n\n  reset () {\n    this.apply(false);\n  }\n\n  get buttonHasFocus () {\n    if (this.buttons.some((button) => { return button.hasFocus; })) return true;\n    return false;\n  }\n\n  get hasFocus () {\n    if (this.element === document.activeElement) return true;\n    if (this.element.querySelectorAll(':focus').length > 0) return true;\n    return this.buttonHasFocus;\n  }\n}\n\nexport { Collapse };\n","class EquisizedGroup {\n  constructor (selector, groups) {\n    this.selector = selector;\n    this.groups = typeof groups === 'string' ? document.querySelectorAll(groups) : groups;\n\n    for (let i = 0; i < this.groups.length; i++) {\n      this.equisizedGroups.push(new Equisized(this.selector, this.groups[i]));\n    }\n\n    this.changing = this.change.bind(this);\n    window.addEventListener('resize', this.changing);\n    this.change();\n  }\n\n  change () {\n    for (let i = 0; i < this.equisizedGroups.length; i++) {\n      this.equisizedGroups[i].change();\n    }\n  }\n}\n\nclass Equisized {\n  constructor (selector, group) {\n    this.selector = selector;\n    this.group = group;\n    this.elements = this.group.querySelectorAll(this.selector);\n    this.maxWidth = 0;\n\n    this.changing = this.change.bind(this);\n    window.addEventListener('resize', this.changing);\n    window.addEventListener('load', this.changing); // fix change before css load\n    // this.change();\n  }\n\n  change () {\n    this.reset();\n    for (let i = 0; i < this.elements.length; i++) {\n      const tmpWWidth = this._getWidth(this.elements[i]);\n      if (tmpWWidth > this.maxWidth) {\n        this.maxWidth = tmpWWidth;\n      }\n    }\n    this.apply();\n  }\n\n  apply () {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i].style.width = this.maxWidth + 1 + 'px';\n    }\n  }\n\n  reset () {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i].style.width = 'auto';\n    }\n    this.maxWidth = 0;\n  }\n\n  _getWidth (el) {\n    let width = el.offsetWidth;\n    const style = getComputedStyle(el);\n    width += parseInt(style.marginLeft) + parseInt(style.marginRight);\n    return width;\n  }\n}\n\nexport { Equisized, EquisizedGroup };\n","import api from './api.js';\nimport { ns } from './src/scripts/global/namespace.js';\nimport { addClass, removeClass } from './src/scripts/manipulation/classes.js';\nimport engine from './src/scripts/engine/engine.js';\nimport { Initializer } from './src/scripts/global/initializer.js';\nimport { KeyListener } from './src/scripts/key-listener/key-listener.js';\nimport { Disclosure } from './src/scripts/disclosure/disclosure.js';\nimport { DisclosureButton } from './src/scripts/disclosure/disclosure-button.js';\nimport { DisclosuresGroup } from './src/scripts/disclosure/disclosures-group.js';\nimport { DISCLOSURE_TYPES } from './src/scripts/disclosure/disclosure-types.js';\nimport { Collapse } from './src/scripts/collapse/collapse.js';\nimport { CollapseButton } from './src/scripts/collapse/collapse-button.js';\nimport { CollapsesGroup } from './src/scripts/collapse/collapses-group.js';\nimport { Equisized } from './src/scripts/manipulation/size.js';\n\napi.ns = ns;\napi.addClass = addClass;\napi.removeClass = removeClass;\napi.engine = engine;\napi.Initializer = Initializer;\napi.KeyListener = KeyListener;\napi.Disclosure = Disclosure;\napi.DisclosureButton = DisclosureButton;\napi.DisclosuresGroup = DisclosuresGroup;\napi.DISCLOSURE_TYPES = DISCLOSURE_TYPES;\napi.Collapse = Collapse;\napi.CollapseButton = CollapseButton;\napi.CollapsesGroup = CollapsesGroup;\napi.Equisized = Equisized;\n","/* eslint-disable no-new */\nimport { Initializer } from './global/initializer.js';\nimport build from './collapse/build.js';\nimport { COLLAPSE_CLASS } from './collapse/constants.js';\n\nnew Initializer(`.${COLLAPSE_CLASS}`, [build]);\n","import { Collapse } from './collapse.js';\n\nconst build = () => {\n  Collapse.build(document);\n};\n\nexport default build;\n","import api from '../../../api.js';\n\nconst ACCORDIONS_GROUP = api.ns('accordions-group');\nconst ACCORDION_ASCENDANT = api.ns('accordion');\n\nexport { ACCORDIONS_GROUP, ACCORDION_ASCENDANT };\n","import api from '../../../api.js';\nimport { ACCORDIONS_GROUP } from './constants.js';\n\nclass AccordionsGroup extends api.CollapsesGroup {\n  // constructor (id, element) {\n  //   super(id, element);\n  //   // this._attachEvents();\n  // }\n\n  _attachEvents () {\n    this.keyEvents = new api.KeyListener(this.element);\n    this.keyEvents.down(api.KeyListener.DOWN, this.arrowDownPress.bind(this), true, true);\n    this.keyEvents.down(api.KeyListener.UP, this.arrowUpPress.bind(this), true, true);\n    this.keyEvents.down(api.KeyListener.HOME, this.homePress.bind(this), true, true);\n    this.keyEvents.down(api.KeyListener.END, this.endPress.bind(this), true, true);\n  }\n\n  get focusIndex () {\n    for (let i = 0; i < this.members.length; i++) if (this.members[i].buttonHasFocus) return i;\n    return -1;\n  }\n\n  /**\n   * Selectionne l'element suivant de la liste si on est sur un bouton\n   * Si on est à la fin on retourne au début\n   */\n  arrowDownPress () {\n    let index = this.focusIndex;\n    if (index === -1) return;\n    index++;\n    if (index >= this.length) index = 0;\n    this.members[index].focus();\n  };\n\n  /**\n   * Selectionne l'element précédent de la liste si on est sur un bouton\n   * Si on est au debut retourne a la fin\n   */\n  arrowUpPress () {\n    let index = this.focusIndex;\n    if (index === -1) return;\n    index--;\n    if (index < 0) index = this.length - 1;\n    this.members[index].focus();\n  };\n\n  /**\n   * Selectionne le permier element de la liste si on est sur un bouton\n   */\n  homePress () {\n    if (this.focusIndex === -1) return;\n    this.members[0].focus();\n  };\n\n  /**\n   * Selectionne le dernier element de la liste si on est sur un bouton\n   */\n  endPress () {\n    if (this.focusIndex === -1) return;\n    this.members[this.length - 1].focus();\n  };\n\n  static get selector () { return ACCORDIONS_GROUP; }\n\n  apply () {\n    super.apply();\n    if (this.current !== null) this.current.focus();\n  }\n}\n\nexport { AccordionsGroup };\n","import api from './api.js';\nimport { AccordionsGroup } from './src/scripts/accordion/accordions-group.js';\n\napi.AccordionsGroup = AccordionsGroup;\n","import api from '../../api.js';\nimport { ACCORDION_ASCENDANT } from './accordion/constants.js';\nimport { AccordionsGroup } from './accordion/accordions-group.js';\n\napi.CollapsesGroup.register(ACCORDION_ASCENDANT, AccordionsGroup);\n","import api from '../../../api.js';\n\nconst BUTTON_SELECTOR = api.ns.selector('btn');\nconst BUTTONS_GROUP_SELECTOR = api.ns.selector('btns-group');\nconst EQUISIZED_BUTTONS_GROUP_SELECTOR = api.ns.selector('btns-group--equisized');\n\nexport { BUTTON_SELECTOR, BUTTONS_GROUP_SELECTOR, EQUISIZED_BUTTONS_GROUP_SELECTOR };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\n\nimport build from './buttons/build.js';\nimport { BUTTONS_GROUP_SELECTOR } from './buttons/constants';\n\nnew api.Initializer(BUTTONS_GROUP_SELECTOR, [build]);\n","import api from '../../../api.js';\nimport { BUTTON_SELECTOR, EQUISIZED_BUTTONS_GROUP_SELECTOR } from './constants';\n\nconst build = () => {\n  const group = document.querySelectorAll(EQUISIZED_BUTTONS_GROUP_SELECTOR);\n  const arrayEquisized = [];\n  for (let i = 0; i < group.length; i++) {\n    arrayEquisized.push(new api.Equisized(BUTTON_SELECTOR, group[i]));\n  }\n};\n\nexport default build;\n","import api from '../../../api.js';\n\nconst MODAL_SELECTOR = api.ns.selector('modal');\nconst MODAL_CLASS = api.ns('modal');\nconst NO_SCROLL_CLASS = api.ns('no-scroll');\nconst SCROLL_SHADOW_CLASS = api.ns('scroll-shadow');\nconst MODAL_BODY_SELECTOR = api.ns.selector('modal__body');\nconst OFFSET_MOBILE = 32; // 32px => 8v => 2rem\n\nexport { MODAL_SELECTOR, MODAL_CLASS, NO_SCROLL_CLASS, SCROLL_SHADOW_CLASS, MODAL_BODY_SELECTOR, OFFSET_MOBILE };\n","import api from '../../../api.js';\n\nconst unordereds = [\n  '[tabindex=\"0\"]',\n  'a[href]',\n  'button:not([disabled])',\n  'input:not([disabled])',\n  'select:not([disabled])',\n  'textarea:not([disabled])',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\" i])',\n  'details>summary:first-of-type',\n  'details'\n];\n\nconst UNORDEREDS = unordereds.join();\n\nconst ordereds = [\n  '[tabindex]:not([tabindex=\"-1\"]):not([tabindex=\"0\"])'\n];\n\nconst ORDEREDS = ordereds.join();\n\nconst isFocusable = (element, container) => {\n  if (window.getComputedStyle(element).visibility === 'hidden') return false;\n  if (container === undefined) container = element;\n\n  while (container.contains(element)) {\n    if (window.getComputedStyle(element).display === 'none') return false;\n    element = element.parentElement;\n  }\n\n  return true;\n};\n\nclass FocusTrap {\n  constructor (onTrap, onUntrap) {\n    this.element = null;\n    this.activeElement = null;\n    this.onTrap = onTrap;\n    this.onUntrap = onUntrap;\n    this.waiting = this.wait.bind(this);\n    this.handling = this.handle.bind(this);\n    this.current = null;\n  }\n\n  get trapped () { return this.element !== null; }\n\n  trap (element) {\n    if (this.trapped) this.untrap();\n\n    this.element = element;\n    this.isTrapping = true;\n    this.wait();\n\n    if (this.onTrap) this.onTrap();\n  }\n\n  wait () {\n    if (!isFocusable(this.element)) {\n      api.engine.renderer.next(this.waiting);\n      return;\n    }\n\n    this.trapping();\n  }\n\n  trapping () {\n    if (!this.isTrapping) return;\n    this.isTrapping = false;\n    const focusables = this.focusables;\n    if (focusables.length) focusables[0].focus();\n    this.element.setAttribute('aria-modal', true);\n    this.element.addEventListener('keydown', this.handling);\n\n    this.stunneds = [];\n    this.stun(document.body);\n  }\n\n  stun (node) {\n    for (const child of node.children) {\n      if (child === this.element) continue;\n      if (child.contains(this.element)) {\n        this.stun(child);\n        continue;\n      }\n      this.stunneds.push(new Stunned(child));\n    }\n  }\n\n  handle (e) {\n    if (e.keyCode !== 9) return;\n\n    const focusables = this.focusables;\n    if (focusables.length === 0) return;\n\n    const first = focusables[0];\n    const last = focusables[focusables.length - 1];\n\n    const index = focusables.indexOf(document.activeElement);\n\n    if (e.shiftKey) {\n      if (!this.element.contains(document.activeElement) || index < 1) {\n        e.preventDefault();\n        last.focus();\n      } else if (document.activeElement.tabIndex > 0 || focusables[index - 1].tabIndex > 0) {\n        e.preventDefault();\n        focusables[index - 1].focus();\n      }\n    } else {\n      if (!this.element.contains(document.activeElement) || index === focusables.length - 1 || index === -1) {\n        e.preventDefault();\n        first.focus();\n      } else if (document.activeElement.tabIndex > 0) {\n        e.preventDefault();\n        focusables[index + 1].focus();\n      }\n    }\n  }\n\n  get focusables () {\n    let unordereds = [...this.element.querySelectorAll(UNORDEREDS)];\n\n    /**\n     *  filtrage des radiobutttons dans des fieldset (la navigations d'un groupe de radio se fait à la flèche et non pas au tab\n     **/\n    const fieldsets = [...this.element.querySelectorAll('fieldset')];\n    let radios = [];\n\n    for (const fieldset of fieldsets) {\n      // eslint-disable-next-line no-useless-call\n      if ([...fieldset.querySelectorAll('input[type=\"radio\"]:focus')].length) radios = radios.concat([...fieldset.querySelectorAll('input[type=\"radio\"]:not(:focus)')]);\n      else if ([...fieldset.querySelectorAll('input[type=\"radio\"]:checked')].length) radios = radios.concat([...fieldset.querySelectorAll('input[type=\"radio\"]:not(:checked)')]);\n      else radios = radios.concat([...fieldset.querySelectorAll('input[type=\"radio\"]')].splice(0, 1));\n    }\n    unordereds = unordereds.filter((unordered) => {\n      return radios.indexOf(unordered) === -1;\n    });\n\n    const ordereds = [...this.element.querySelectorAll(ORDEREDS)];\n\n    ordereds.sort((a, b) => a.tabIndex - b.tabIndex);\n\n    const noDuplicates = unordereds.filter((element) => ordereds.indexOf(element) === -1);\n    const concateneds = ordereds.concat(noDuplicates);\n    const filtereds = concateneds.filter((element) => element.tabIndex !== '-1' && isFocusable(element, this.element));\n\n    return filtereds;\n  }\n\n  untrap () {\n    if (!this.trapped) return;\n    this.isTrapping = false;\n\n    this.element.removeAttribute('aria-modal');\n    this.element.removeEventListener('keydown', this.handling);\n    this.element = null;\n\n    for (const stunned of this.stunneds) stunned.unstun();\n    this.stunneds = [];\n\n    if (this.onUntrap) this.onUntrap();\n  }\n}\n\nclass Stunned {\n  constructor (element) {\n    this.element = element;\n    this.hidden = element.getAttribute('aria-hidden');\n    this.inert = element.getAttribute('inert');\n\n    this.element.setAttribute('aria-hidden', true);\n    this.element.setAttribute('inert', '');\n  }\n\n  unstun () {\n    if (this.hidden === null) this.element.removeAttribute('aria-hidden');\n    else this.element.setAttribute('aria-hidden', this.hidden);\n\n    if (this.inert === null) this.element.removeAttribute('inert');\n    else this.element.setAttribute('inert', this.inert);\n  }\n}\n\nexport { FocusTrap };\n","import api from '../../../api.js';\nimport { FocusTrap } from './focus-trap.js';\n\nclass ModalsGroup extends api.DisclosuresGroup {\n  constructor () {\n    super();\n    this.trap = new FocusTrap();\n  }\n\n  apply (value, initial) {\n    super.apply(value, initial);\n    if (this.current === null) this.trap.untrap();\n    else this.trap.trap(this.current.element);\n  }\n}\n\nexport { ModalsGroup };\n","import api from '../../../api.js';\n\nclass ModalButton extends api.DisclosureButton {\n  /**\n   * TODO: https://a11ysupport.io/tech/aria/aria-haspopup_attribute\n   */\n  apply (value) {\n    super.apply(value);\n    // if (!this.hasAttribute) return;\n    // this.element.setAttribute(this.disclosure.attributeName, value);\n  }\n}\n\nexport { ModalButton };\n","import api from '../../../api.js';\nimport {\n  OFFSET_MOBILE,\n  NO_SCROLL_CLASS,\n  MODAL_CLASS,\n  SCROLL_SHADOW_CLASS,\n  MODAL_BODY_SELECTOR\n} from './constants';\nimport { ModalsGroup } from './modals-group';\nimport { ModalButton } from './modal-button';\n\nconst group = new ModalsGroup();\n\nclass Modal extends api.Disclosure {\n  constructor (element) {\n    super(element);\n    this.body = this.element.querySelector(MODAL_BODY_SELECTOR);\n    this.scrollDistance = 0;\n    this.scrolling = this.resize.bind(this, false);\n    this.resizing = this.resize.bind(this, true);\n    this.listen();\n    this.resize(true);\n  }\n\n  listen () {\n    this.element.addEventListener('click', this.click.bind(this));\n\n    this.keyListener = new api.KeyListener(this.element);\n    this.keyListener.down(api.KeyListener.ESCAPE, this.conceal.bind(this), true, true);\n\n    if (this.body) {\n      this.body.addEventListener('scroll', this.scrolling);\n      window.addEventListener('resize', this.resizing);\n      window.addEventListener('orientationchange', this.resizing);\n    }\n  }\n\n  click (e) {\n    if (this.body && this.element === e.target) this.conceal();\n  }\n\n  group () {\n    group.add(this);\n  }\n\n  apply (value, initial) {\n    this.handleScroll(!value);\n    if (!value) {\n      if (!initial) this.focus();\n    } else {\n      if (!initial) this.resize(true);\n    }\n    super.apply(value, initial);\n  }\n\n  /**\n   * Fixe l'arrière plan quand la modal est ouverte\n   */\n  // TODO: créer une fonction de fix de scroll dans core (api.noScroll = true)\n  handleScroll (isScrollable) {\n    if (isScrollable) {\n      api.removeClass(document.documentElement, NO_SCROLL_CLASS);\n      document.body.style.top = '';\n      window.scroll(0, this.scrollDistance);\n    } else {\n      if (!document.documentElement.classList.contains(NO_SCROLL_CLASS)) {\n        this.scrollDistance = window.scrollY;\n      }\n      document.body.style.top = this.scrollDistance * -1 + 'px';\n      api.addClass(document.documentElement, NO_SCROLL_CLASS);\n    }\n  }\n\n  /**\n   * Ajoute une ombre autour du footer lorsque l'on peut scroller dans la modale\n   * corrige le 100vh, en mobile notamment, lorsque la barre navigateur est présente par exemple.\n   */\n  resize (isResizing, e) {\n    if (!this.body) return;\n    if (this.body.scrollHeight > this.body.clientHeight) {\n      if (this.body.offsetHeight + this.body.scrollTop >= this.body.scrollHeight) {\n        api.removeClass(this.body, SCROLL_SHADOW_CLASS);\n      } else {\n        api.addClass(this.body, SCROLL_SHADOW_CLASS);\n      }\n    } else {\n      api.removeClass(this.body, SCROLL_SHADOW_CLASS);\n    }\n\n    if (isResizing) {\n      this.body.style.maxHeight = (window.innerHeight - OFFSET_MOBILE) + 'px';\n\n      // Une deuxième fois après positionnement des barres du navigateur (ios)\n      // TODO: à tester si fonctionnel sans setTimeout\n      requestAnimationFrame(() => {\n        this.body.style.maxHeight = (window.innerHeight - OFFSET_MOBILE) + 'px';\n      });\n    }\n  }\n\n  static get type () { return api.DISCLOSURE_TYPES.expand; }\n  static get selector () { return MODAL_CLASS; }\n\n  buttonFactory (element) {\n    return new ModalButton(element, this);\n  }\n\n  get GroupConstructor () { return ModalsGroup; }\n}\n\nexport { Modal };\n","import api from './api.js';\n\nimport { Modal } from './src/scripts/modal/modal';\nimport { ModalButton } from './src/scripts/modal/modal-button';\nimport { ModalsGroup } from './src/scripts/modal/modals-group';\nimport { FocusTrap } from './src/scripts/modal/focus-trap';\n\napi.Modal = Modal;\napi.ModalButton = ModalButton;\napi.ModalsGroup = ModalsGroup;\napi.FocusTrap = FocusTrap;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { build } from './modal/build.js';\nimport { MODAL_SELECTOR } from './modal/constants.js';\n\nnew api.Initializer(MODAL_SELECTOR, [build]);\n","import { Modal } from './modal';\n\n/**\n * initialise tout les éléments Modal dans la page\n */\nconst build = () => {\n  Modal.build(document);\n};\n\nexport { build };\n","import api from '../../../api.js';\n\nconst NAVIGATION_CLASS = api.ns('nav');\nconst NAVIGATION_LIST_CLASS = api.ns('nav__list');\nconst NAVIGATION_ITEM_CLASS = api.ns('nav__item');\nconst NAVIGATION_ITEM_RIGHT_CLASS = api.ns('nav__item--align-right');\nconst NAVIGATION_MENU_CLASS = api.ns('menu');\n\nexport { NAVIGATION_CLASS, NAVIGATION_LIST_CLASS, NAVIGATION_MENU_CLASS, NAVIGATION_ITEM_CLASS, NAVIGATION_ITEM_RIGHT_CLASS };\n","import api from '../../../api.js';\nimport {\n  NAVIGATION_CLASS,\n  NAVIGATION_ITEM_CLASS,\n  NAVIGATION_LIST_CLASS,\n  NAVIGATION_MENU_CLASS,\n  NAVIGATION_ITEM_RIGHT_CLASS\n} from './constants';\n\nclass Navigation extends api.CollapsesGroup {\n  constructor (id, element) {\n    super(id, element);\n\n    this.menus = [];\n\n    this.navList = element.querySelector(`.${NAVIGATION_LIST_CLASS}`);\n\n    document.addEventListener('focusout', this.focusOut.bind(this));\n    window.addEventListener('resize', this.resize.bind(this));\n    window.addEventListener('orientationchange', this.resize.bind(this));\n    this.resize();\n  }\n\n  static get selector () { return NAVIGATION_CLASS; }\n\n  add (member) {\n    super.add(member);\n\n    if (member.element.classList.contains(NAVIGATION_MENU_CLASS)) {\n      this.menus.push(new NavigationMenu(member, this.navList.getBoundingClientRect().right));\n    }\n  }\n\n  focusOut (e) {\n    requestAnimationFrame(() => {\n      if (this.current !== null && !this.current.hasFocus) this.index = -1;\n    });\n  }\n\n  get index () { return super.index; }\n\n  set index (value) {\n    if (value === -1 && this.current !== null && this.current.hasFocus) this.current.focus();\n    super.index = value;\n  }\n\n  resize () {\n    const right = this.navList.getBoundingClientRect().right;\n\n    for (const menu of this.menus) menu.place(right);\n  }\n}\n\nclass NavigationMenu {\n  constructor (collapse, right) {\n    this.initialize(collapse);\n    this.place(right);\n  }\n\n  initialize (collapse) {\n    this.element = collapse.element;\n\n    for (const button of collapse.buttons) {\n      if (!button.hasAttribute) continue;\n      this.button = button.element;\n      break;\n    }\n\n    let item = this.element.parentElement;\n    while (item) {\n      if (item.classList.contains(NAVIGATION_ITEM_CLASS)) {\n        this.item = item;\n        break;\n      }\n      item = item.parentElement;\n    }\n  }\n\n  place (right) {\n    const styles = getComputedStyle(this.element);\n    const width = parseFloat(styles.width);\n    const left = this.button.getBoundingClientRect().left;\n\n    if (left + width > right) api.addClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n    else api.removeClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n  }\n}\n\nexport { Navigation };\n","import api from './api.js';\nimport { Navigation } from './src/scripts/navigation/navigation';\n\napi.Navigation = Navigation;\n","import api from '../../api.js';\nimport { NAVIGATION_CLASS } from './navigation/constants.js';\nimport { Navigation } from './navigation/navigation.js';\n\napi.CollapsesGroup.register(NAVIGATION_CLASS, Navigation);\n","import api from '../../../api.js';\n\nconst SCHEME_ATTR = api.ns.attr('theme');\nconst TRANSITION_ATTR = api.ns.attr('transition');\n\nexport { SCHEME_ATTR, TRANSITION_ATTR };\n","import { SCHEME_ATTR, TRANSITION_ATTR } from './constants';\n\nclass Scheme {\n  constructor () {\n    this.init();\n  }\n\n  init () {\n    this.scheme = localStorage.getItem('scheme')\n      ? localStorage.getItem('scheme')\n      : null;\n\n    if (this.scheme === null) {\n      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n        this.scheme = 'dark';\n        localStorage.setItem('scheme', 'dark');\n      } else this.scheme = 'light';\n    }\n\n    this.root = document.documentElement;\n\n    if (this.scheme === 'dark') {\n      if (!this.root.hasAttribute(TRANSITION_ATTR)) {\n        this.root.setAttribute(SCHEME_ATTR, 'dark');\n      } else {\n        this.root.removeAttribute(TRANSITION_ATTR);\n        this.root.setAttribute(SCHEME_ATTR, 'dark');\n\n        setTimeout(() => {\n          this.root.setAttribute(TRANSITION_ATTR, '');\n        }, 300);\n      }\n    } else this.root.setAttribute(SCHEME_ATTR, 'light');\n\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observer.observe(this.root, { attributes: true });\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === SCHEME_ATTR) {\n        const scheme = this.root.getAttribute(SCHEME_ATTR);\n        if (scheme === 'dark') {\n          localStorage.setItem('scheme', 'dark');\n        } else if (scheme === 'light') {\n          localStorage.setItem('scheme', 'light');\n        }\n      }\n    });\n  }\n}\n\nexport { Scheme };\n","import api from './api.js';\nimport { Scheme } from './src/scripts/scheme/scheme';\n\napi.Scheme = Scheme;\n","import api from '../../../api.js';\n\nconst RADIOS_THEME_NAME = `input[name=\"${api.ns.selector('radios-theme', '')}\"]`;\nconst SWITCH_THEME_ID = api.ns.selector('switch-theme', '#');\nconst THEME_ATTR = api.ns.attr('theme');\n\nexport { RADIOS_THEME_NAME, SWITCH_THEME_ID, THEME_ATTR };\n","import { RADIOS_THEME_NAME, THEME_ATTR } from './constants';\n\nclass SwitchTheme {\n  constructor () {\n    this.attributeName = THEME_ATTR;\n    this.theme = null;\n    this.radios = document.querySelectorAll(RADIOS_THEME_NAME);\n\n    for (var i = 0; i < this.radios.length; i++) {\n      this.radios[i].addEventListener('change', this.change.bind(this));\n    }\n\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observe();\n    this.apply();\n  }\n\n  observe () {\n    this.observer.observe(document.documentElement, { attributes: true });\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === this.attributeName) {\n        this.apply();\n      }\n    });\n  }\n\n  apply () {\n    const theme = document.documentElement.getAttribute(this.attributeName);\n    this.isApplying = true;\n    for (var i = 0; i < this.radios.length; i++) {\n      this.radios[i].checked = this.radios[i].value === theme;\n    }\n    this.isApplying = false;\n  }\n\n  change () {\n    if (this.isApplying) return;\n    if (this.observer) this.observer.disconnect();\n    this.theme = document.querySelector(RADIOS_THEME_NAME + ':checked');\n    if (this.theme) {\n      document.documentElement.setAttribute(this.attributeName, this.theme.value);\n    } else {\n      document.documentElement.removeAttribute(this.attributeName);\n    }\n    if (this.observer) this.observe();\n  }\n}\n\nexport { SwitchTheme };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { SCHEME_ATTR } from './scheme/constants';\nimport { SWITCH_THEME_ID } from './switch-theme/constants';\nimport buildScheme from './scheme/build';\nimport buildSwitch from './switch-theme/build';\n\nnew api.Initializer(`:root[${SCHEME_ATTR}]`, [buildScheme]);\nnew api.Initializer(`${SWITCH_THEME_ID}`, [buildSwitch]);\n","/* eslint-disable no-new */\nimport { Scheme } from './scheme';\n\nconst build = () => {\n  new Scheme();\n};\n\nexport default build;\n","/* eslint-disable no-new */\nimport { SwitchTheme } from './switch-theme';\n\nconst build = () => {\n  new SwitchTheme();\n};\n\nexport default build;\n","import api from '../../../api.js';\n\nconst SIDEMENU_CLASS = api.ns('sidemenu');\nconst SIDEMENU_LIST_CLASS = api.ns('sidemenu__list');\n\nexport { SIDEMENU_CLASS, SIDEMENU_LIST_CLASS };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { SIDEMENU_CLASS, SIDEMENU_LIST_CLASS } from './sidemenu/constants';\n\napi.CollapsesGroup.register(SIDEMENU_CLASS, SIDEMENU_LIST_CLASS);\n","import api from '../../../api.js';\n\nconst TABLE_SELECTOR = api.ns.selector('table');\n// const TABLE_CLASS = api.ns('table');\nconst TABLE_SCROLLING_SELECTOR = `${api.ns.selector('table')}:not(${api.ns.selector('table--no-scroll')})`;\nconst LEFT = 'left';\nconst RIGHT = 'right';\nconst SHADOW_CLASS = api.ns('table--shadow');\nconst SHADOW_LEFT_CLASS = api.ns('table--shadow-left');\nconst SHADOW_RIGHT_CLASS = api.ns('table--shadow-right');\nconst WRAPPER_CLASS = api.ns('table__wrapper');\nconst CAPTION_BOTTOM_CLASS = ('table--caption-bottom');\nconst SCROLL_OFFSET = 1; // valeur en px du scroll avant laquelle le shadow s'active ou se desactive\n\nexport { TABLE_SELECTOR, TABLE_SCROLLING_SELECTOR, LEFT, RIGHT, SHADOW_CLASS, SHADOW_LEFT_CLASS, SHADOW_RIGHT_CLASS, WRAPPER_CLASS, CAPTION_BOTTOM_CLASS, SCROLL_OFFSET };\n","import api from '../../../api.js';\nimport {\n  SHADOW_CLASS,\n  SHADOW_LEFT_CLASS,\n  SHADOW_RIGHT_CLASS,\n  WRAPPER_CLASS,\n  LEFT,\n  RIGHT,\n  CAPTION_BOTTOM_CLASS, SCROLL_OFFSET\n} from './constants.js';\n\nclass Table {\n  constructor (table) {\n    this.init(table);\n  }\n\n  init (table) {\n    this.table = table;\n    this.tableElem = this.table.querySelector('table');\n    this.tableContent = this.tableElem.querySelector('tbody');\n    this.isScrollable = this.tableContent.offsetWidth > this.tableElem.offsetWidth;\n    this.caption = this.tableElem.querySelector('caption');\n    this.captionHeight = 0;\n    this.wrap();\n\n    const scrolling = this.change.bind(this);\n    this.tableElem.addEventListener('scroll', scrolling);\n    this.change();\n  }\n\n  change () {\n    const newScroll = this.tableContent.offsetWidth > this.tableElem.offsetWidth;\n    let firstTimeScrollable = this.tableElem.offsetWidth > this.table.offsetWidth;\n    if (newScroll || firstTimeScrollable) {\n      this.scroll();\n      this.handleCaption();\n    } else {\n      if (newScroll !== this.isScrollable) this.delete();\n    }\n    this.isScrollable = newScroll;\n    firstTimeScrollable = false;\n  }\n\n  delete () {\n    api.removeClass(this.table, SHADOW_RIGHT_CLASS);\n    api.removeClass(this.table, SHADOW_LEFT_CLASS);\n    api.removeClass(this.table, SHADOW_CLASS);\n    if (this.caption) {\n      this.tableElem.style.marginTop = '';\n      this.caption.style.top = '';\n      this.tableElem.style.marginBottom = '';\n      this.caption.style.bottom = '';\n    }\n  }\n\n  scroll () {\n    api.addClass(this.table, SHADOW_CLASS);\n    this.setShadowPosition();\n  }\n\n  /* ajoute un wrapper autour du tableau */\n  wrap () {\n    const wrapperHtml = document.createElement('div');\n    wrapperHtml.className = WRAPPER_CLASS;\n    this.table.insertBefore(wrapperHtml, this.tableElem);\n    wrapperHtml.appendChild(this.tableElem);\n    this.tableInnerWrapper = wrapperHtml;\n  }\n\n  /* affiche les blocs shadow en fonction de la position du scroll, en ajoutant la classe visible */\n  setShadowPosition () {\n    const tableScrollLeft = this.getScrollPosition(LEFT);\n    const tableScrollRight = this.getScrollPosition(RIGHT);\n\n    // on inverse en cas de lecture droite - gauche\n    if (document.documentElement.getAttribute('dir') === 'rtl') {\n      this.setShadowVisibility(RIGHT, tableScrollLeft);\n      this.setShadowVisibility(LEFT, tableScrollRight);\n    } else {\n      this.setShadowVisibility(LEFT, tableScrollLeft);\n      this.setShadowVisibility(RIGHT, tableScrollRight);\n    }\n  }\n\n  /* Donne le nombre de pixels scrollés honrizontalement dans un element scrollable */\n  getScrollPosition (side) {\n    let inverter = 1;\n    // on inverse en cas de lecture droite - gauche pour que la valeur de scroll soit toujours positive\n    if (document.documentElement.getAttribute('dir') === 'rtl') {\n      inverter = -1;\n    }\n    switch (side) {\n      case LEFT:\n        return this.tableElem.scrollLeft * inverter;\n      case RIGHT:\n        return this.tableContent.offsetWidth - this.tableElem.offsetWidth - this.tableElem.scrollLeft * inverter;\n      default:\n        return false;\n    }\n  }\n\n  /* positionne la caption en top négatif et ajoute un margin-top au wrapper */\n  handleCaption () {\n    if (this.caption) {\n      const style = getComputedStyle(this.caption);\n      const newHeight = this.caption.offsetHeight + parseInt(style.marginTop) + parseInt(style.marginBottom);\n      this.captionHeight = newHeight;\n      if (this.table.classList.contains(CAPTION_BOTTOM_CLASS)) {\n        this.tableElem.style.marginBottom = this.captionHeight + 'px';\n        this.caption.style.bottom = -this.captionHeight + 'px';\n      } else {\n        this.tableElem.style.marginTop = this.captionHeight + 'px';\n        this.caption.style.top = -this.captionHeight + 'px';\n      }\n    }\n  }\n\n  /* ajoute la classe rf-table--shadow-right ou rf-table--shadow-right sur rf-table\n   en fonction d'une valeur de scroll et du sens (right, left) */\n  setShadowVisibility (side, scrollPosition) {\n    // si on a pas scroll, ou qu'on scroll jusqu'au bout\n    if (scrollPosition <= SCROLL_OFFSET) {\n      if (side === LEFT) api.removeClass(this.table, SHADOW_LEFT_CLASS);\n      else if (side === RIGHT) api.removeClass(this.table, SHADOW_RIGHT_CLASS);\n    } else {\n      if (side === LEFT) api.addClass(this.table, SHADOW_LEFT_CLASS);\n      else if (side === RIGHT) api.addClass(this.table, SHADOW_RIGHT_CLASS);\n    }\n  }\n}\n\nexport { Table };\n","import api from './api.js';\nimport { Table } from './src/scripts/table/table.js';\n\napi.Table = Table;\n","import { TABLE_SCROLLING_SELECTOR } from './constants';\nimport { Table } from './table';\n\nconst tables = [];\n\nconst change = () => {\n  for (let i = 0; i < tables.length; i++) tables[i].change();\n};\n\nconst build = () => {\n  const tableNodes = document.querySelectorAll(TABLE_SCROLLING_SELECTOR);\n  for (let i = 0; i < tableNodes.length; i++) tables.push(new Table(tableNodes[i]));\n\n  window.addEventListener('resize', change);\n  window.addEventListener('orientationchange', change);\n  change();\n};\n\nexport { build };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { build } from './table/build.js';\nimport { TABLE_SELECTOR } from './table/constants';\n\nnew api.Initializer(TABLE_SELECTOR, [build]);\n","import api from '../../../api';\n\n/**\n  * TabButton correspond au bouton cliquable qui change le panel\n  * TabButton étend de DisclosureButton qui ajoute/enelve l'attribut aria-selected,\n  * Et change l'attributte tabindex a 0 si le boutton est actif (value=true), -1 s'il n'est pas actif (value=false)\n */\nclass TabButton extends api.DisclosureButton {\n  apply (value) {\n    super.apply(value);\n    if (this.hasAttribute) {\n      this.element.setAttribute('tabindex', value ? '0' : '-1');\n    }\n  }\n}\n\nexport { TabButton };\n","import api from '../../../api.js';\n\nconst TABS_SELECTOR = api.ns.selector('tabs');\nconst TABS_CLASS = api.ns('tabs');\nconst TAB_CLASS = api.ns('tabs__tab');\nconst PANEL_CLASS = api.ns('tabs__panel');\nconst LIST_CLASS = api.ns('tabs__list');\n\nconst TRANSITION_TIME = 100;\n\nexport { TABS_SELECTOR, TABS_CLASS, TAB_CLASS, PANEL_CLASS, LIST_CLASS, TRANSITION_TIME };\n","import api from '../../../api.js';\nimport { LIST_CLASS, TAB_CLASS, TABS_CLASS } from './constants';\n\n/**\n* TabGroup est la classe étendue de DiscosuresGroup\n* Correspond à un objet Tabs avec plusieurs tab-button & Tab (panel)\n*/\nclass TabsGroup extends api.DisclosuresGroup {\n  constructor (id, element) {\n    super(id, element);\n    this.list = element.querySelector(`.${LIST_CLASS}`);\n\n    element.addEventListener('transitionend', this.transitionend.bind(this));\n\n    this.listen();\n    api.engine.renderer.add(this.render.bind(this));\n  }\n\n  static get selector () { return TABS_CLASS; }\n\n  transitionend (e) {\n    this.element.style.transition = 'none';\n  }\n\n  listen () {\n    this.keyListener = new api.KeyListener(this.element);\n    this.keyListener.down(api.KeyListener.RIGHT, this.arrowRightPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.LEFT, this.arrowLeftPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.HOME, this.homePress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.END, this.endPress.bind(this), true, true);\n  }\n\n  /**\n   * Selectionne l'element suivant de la liste si on est sur un bouton\n   * Si on est à la fin on retourne au début\n   */\n  arrowRightPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index < this.length - 1) {\n        this.index++;\n      } else {\n        this.index = 0;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne l'element précédent de la liste si on est sur un bouton\n   * Si on est au debut retourne a la fin\n   */\n  arrowLeftPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index > 0) {\n        this.index--;\n      } else {\n        this.index = this.length - 1;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le permier element de la liste si on est sur un bouton\n   */\n  homePress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = 0;\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le dernier element de la liste si on est sur un bouton\n   */\n  endPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = this.length - 1;\n      this.focus();\n    }\n  };\n\n  focus () {\n    if (this.current) this.current.focus();\n  }\n\n  apply (value, initial) {\n    for (let i = 0; i < this._index; i++) this.members[i].translate(-1, initial);\n    this.current.element.style.transform = '';\n    for (let i = this._index + 1; i < this.length; i++) this.members[i].translate(1, initial);\n    this.element.style.transition = '';\n  }\n\n  add (tab) {\n    super.add(tab);\n    if (this.length === 1 || tab.disclosed) this.current = tab;\n    else {\n      const index = this.members.indexOf(tab);\n      if (this._index > -1 && this._index !== index) tab.element.style.transform = `translateX(${index < this._index ? -100 : 100}%)`;\n    }\n  }\n\n  render () {\n    if (this.current === null) return;\n    const paneHeight = Math.round(this.current.element.offsetHeight);\n    if (this.panelHeight === paneHeight) return;\n    this.panelHeight = paneHeight;\n    this.element.style.height = (this.panelHeight + this.list.offsetHeight) + 'px';\n  }\n}\n\nexport { TabsGroup };\n","import api from '../../../api.js';\nimport { TabButton } from './tab-button.js';\nimport { PANEL_CLASS } from './constants.js';\nimport { TabsGroup } from './tabs-group.js';\n\n/**\n  * Tab coorespond au panel d'un élement Tabs (tab panel)\n  * Tab étend disclosure qui ajoute/enleve le modifier --selected,\n  * et ajoute/eleve l'attribut hidden, sur le panel\n  */\nclass Tab extends api.Disclosure {\n  static get type () { return api.DISCLOSURE_TYPES.select; }\n  static get selector () { return PANEL_CLASS; }\n\n  get GroupConstructor () { return TabsGroup; }\n\n  buttonFactory (element) {\n    return new TabButton(element, this);\n  }\n\n  translate (direction, initial) {\n    if (initial) this.element.style.transition = 'none';\n    this.element.style.transform = `translate(${direction * 100}%)`;\n    if (initial) this.element.style.transition = '';\n  }\n\n  reset () {\n    this.group.index = 0;\n  }\n}\n\nexport { Tab };\n","import api from './api.js';\nimport { Tab } from './src/scripts/tabs/tab.js';\nimport { TabButton } from './src/scripts/tabs/tab-button.js';\nimport { TabsGroup } from './src/scripts/tabs/tabs-group';\n\napi.Tab = Tab;\napi.TabButton = TabButton;\napi.TabsGroup = TabsGroup;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { build } from './tabs/build.js';\nimport { TABS_SELECTOR } from './tabs/constants.js';\n\nnew api.Initializer(TABS_SELECTOR, [build]);\n","import { Tab } from './tab';\n\n/**\n* Initialise tout les éléments Tab dans la page\n*/\nconst build = () => {\n  Tab.build(document);\n};\n\nexport { build };\n","import api from '../../../api.js';\n\nconst HEADER_SELECTOR = api.ns.selector('header');\nconst HEADER_TOOLS_SELECTOR = api.ns.selector('header__tools');\nconst HEADER_SEARCH_BAR_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.ns.selector('search-bar')}`;\nconst HEADER_SHORTCUTS_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.ns.selector('shortcuts')}`;\nconst HEADER_NAV_SELECTOR = api.ns.selector('nav');\nconst HEADER_NAV_LIST_SELECTOR = `${HEADER_NAV_SELECTOR} ${api.ns.selector('nav__list')}`;\n\nexport { HEADER_SELECTOR, HEADER_TOOLS_SELECTOR, HEADER_SEARCH_BAR_SELECTOR, HEADER_SHORTCUTS_SELECTOR, HEADER_NAV_SELECTOR, HEADER_NAV_LIST_SELECTOR };\n","import {\n  HEADER_NAV_LIST_SELECTOR,\n  HEADER_NAV_SELECTOR,\n  HEADER_SEARCH_BAR_SELECTOR,\n  HEADER_SELECTOR,\n  HEADER_SHORTCUTS_SELECTOR,\n  HEADER_TOOLS_SELECTOR\n} from './constants';\n\nlet count = 0;\n\nclass Header {\n  constructor (header) {\n    this.header = header || document.querySelector(HEADER_SELECTOR);\n    this.numId = count;\n    count++;\n\n    this.init();\n  }\n\n  init () {\n    this.popins = [];\n\n    this.tools = this.header.querySelector(HEADER_TOOLS_SELECTOR);\n\n    this.searchBar = this.header.querySelector(HEADER_SEARCH_BAR_SELECTOR);\n\n    this.nav = this.header.querySelector(HEADER_NAV_SELECTOR);\n\n    this.shortcuts = this.header.querySelector(HEADER_SHORTCUTS_SELECTOR);\n\n    this.navList = this.header.querySelector(HEADER_NAV_LIST_SELECTOR);\n\n    this.changing = this.change.bind(this);\n\n    window.addEventListener('resize', this.changing);\n    window.addEventListener('orientationchange', this.changing);\n    this.change();\n  }\n\n  change () {\n    this.isLarge = window.matchMedia('(min-width: 62em)').matches;\n\n    for (let i = 0; i < this.popins.length; i++) this.popins[i].change(this.isLarge);\n\n    if (this.shortcuts !== null) {\n      if (this.isLarge) {\n        if (this.searchBar !== null) this.tools.insertBefore(this.shortcuts, this.searchBar);\n        else this.tools.appendChild(this.shortcuts);\n      } else {\n        this.nav.insertBefore(this.shortcuts, this.navList);\n      }\n    }\n  }\n}\n\nexport { Header };\n","import api from './api.js';\nimport { Header } from './src/scripts/header/header';\n\napi.Header = Header;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { HEADER_SELECTOR } from './header/constants.js';\nimport { build } from './header/build.js';\n\nnew api.Initializer(HEADER_SELECTOR, [build]);\n","import { Header } from './header.js';\nimport { HEADER_SELECTOR } from './constants';\n\nconst build = () => {\n  const elements = Array.prototype.slice.call(document.querySelectorAll(HEADER_SELECTOR));\n\n  const headers = [];\n\n  for (const element of elements) headers.push(new Header(element));\n};\n\nexport { build };\n"],"names":["const","api","window","ns","name","prefix","selector","notation","undefined","attr","quoted","value","let","result","modifiyClass","element","className","remove","charAt","substr","classNames","split","index","indexOf","splice","push","join","addClass","removeClass","Renderer","this","closures","nexts","rendering","render","bind","add","closure","next","requestAnimationFrame","call","slice","length","Engine","renderer","register","factory","start","stop","engine","Initializer","builders","instances","document","readyState","addEventListener","querySelectorAll","i","KeyListener","collections","_add","type","action","KeyActionCollection","down","key","preventDefault","stopPropagation","KeyAction","up","dispose","types","actions","binding","handle","e","removeEventListener","keyCode","TAB","ESCAPE","END","HOME","LEFT","UP","RIGHT","DOWN","GROUP_ATTR","groups","DisclosuresGroup","id","members","_index","_current","getGroupById","group","constructor","getGroupByElement","groupById","member","groupConstructor","getAttribute","groupByParent","GroupConstructor","groupSelector","parentElement","classList","contains","setGroup","current","disclosed","apply","DisclosureButton","disclosure","hasAttribute","attributeName","click","observer","MutationObserver","mutate","observe","attributes","change","mutations","forEach","mutation","disconnect","setAttribute","disclosures","Disclosure","buttons","_selector","modifier","aria","addButton","build","from","Array","prototype","staticAccessors","button","buttonFactory","disclose","conceal","initial","reset","canConceal","hasFocus","activeElement","some","focus","DISCLOSURE_TYPES","expand","select","CollapseButton","prototypeAccessors","ascendants","CollapsesGroup","ascendant","COLLAPSE_CLASS","Collapse","super","transitionend","style","maxHeight","setProperty","height","offsetHeight","buttonHasFocus","Equisized","elements","maxWidth","changing","tmpWWidth","_getWidth","width","el","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","ACCORDIONS_GROUP","ACCORDION_ASCENDANT","AccordionsGroup","_attachEvents","keyEvents","arrowDownPress","arrowUpPress","homePress","endPress","focusIndex","BUTTON_SELECTOR","BUTTONS_GROUP_SELECTOR","EQUISIZED_BUTTONS_GROUP_SELECTOR","arrayEquisized","MODAL_SELECTOR","MODAL_CLASS","NO_SCROLL_CLASS","SCROLL_SHADOW_CLASS","MODAL_BODY_SELECTOR","UNORDEREDS","ORDEREDS","isFocusable","container","visibility","display","FocusTrap","onTrap","onUntrap","waiting","wait","handling","trapped","trap","untrap","isTrapping","trapping","focusables","stunneds","stun","body","node","children","child","Stunned","first","last","shiftKey","tabIndex","unordereds","fieldsets","radios","fieldset","concat","filter","unordered","ordereds","sort","a","b","noDuplicates","removeAttribute","unstun","hidden","inert","ModalsGroup","ModalButton","Modal","querySelector","scrollDistance","scrolling","resize","resizing","listen","keyListener","target","handleScroll","isScrollable","documentElement","top","scroll","scrollY","isResizing","scrollHeight","clientHeight","scrollTop","innerHeight","NAVIGATION_CLASS","NAVIGATION_LIST_CLASS","NAVIGATION_ITEM_CLASS","NAVIGATION_ITEM_RIGHT_CLASS","NAVIGATION_MENU_CLASS","Navigation","menus","navList","focusOut","NavigationMenu","getBoundingClientRect","right","place","collapse","initialize","item","styles","parseFloat","left","SCHEME_ATTR","TRANSITION_ATTR","Scheme","init","scheme","localStorage","getItem","matchMedia","matches","setItem","root","setTimeout","RADIOS_THEME_NAME","SWITCH_THEME_ID","THEME_ATTR","SwitchTheme","theme","isApplying","checked","SIDEMENU_CLASS","SIDEMENU_LIST_CLASS","TABLE_SELECTOR","TABLE_SCROLLING_SELECTOR","SHADOW_CLASS","SHADOW_LEFT_CLASS","SHADOW_RIGHT_CLASS","WRAPPER_CLASS","Table","table","tableElem","tableContent","caption","captionHeight","wrap","newScroll","firstTimeScrollable","handleCaption","delete","marginTop","marginBottom","bottom","setShadowPosition","wrapperHtml","createElement","insertBefore","appendChild","tableInnerWrapper","tableScrollLeft","getScrollPosition","tableScrollRight","setShadowVisibility","side","inverter","scrollLeft","newHeight","scrollPosition","tables","tableNodes","TabButton","TABS_SELECTOR","TABS_CLASS","TAB_CLASS","PANEL_CLASS","LIST_CLASS","TabsGroup","list","transition","arrowRightPress","arrowLeftPress","translate","transform","tab","paneHeight","Math","round","panelHeight","Tab","direction","HEADER_SELECTOR","HEADER_TOOLS_SELECTOR","HEADER_SEARCH_BAR_SELECTOR","HEADER_SHORTCUTS_SELECTOR","HEADER_NAV_SELECTOR","HEADER_NAV_LIST_SELECTOR","count","Header","header","numId","popins","tools","searchBar","nav","shortcuts","isLarge","headers"],"mappings":";yBAAOA,ICEDC,EAAMC,OAAgB,MAAK,GACjCA,OAAgB,KAAID,ECDbD,IAAMG,WAAMC,GACjB,MAAUC,MAAUD,GAGtBD,EAAGG,kBAAYF,EAAMG,GAEnB,YADiBC,IAAbD,IAAwBA,EAAW,QAC7BA,EAAWJ,EAAGC,KAG1BD,EAAGM,cAAQL,EAAMM,EAAQC,GACvB,cAAeR,EAAGC,KAGZE,kBAAYF,EAAMO,GACxBC,IAAIC,EAASV,EAAGM,KAAKL,GAErB,YADcI,IAAVG,IAAqBE,GAAU,KAAKF,WAC7BE,OClBbb,IAAMc,WAAgBC,EAASC,EAAWC,GACZ,MAAxBD,EAAUE,OAAO,KAAYF,EAAYA,EAAUG,OAAO,IAC9DnB,IAAMoB,EAAaL,EAAQC,UAAUK,MAAM,KACrCC,EAAQF,EAAWG,QAAQP,IAClB,IAAXC,EACEK,GAAS,GAAGF,EAAWI,OAAOF,EAAO,IACrB,IAAXA,GAAcF,EAAWK,KAAKT,GACzCD,EAAQC,UAAYI,EAAWM,KAAK,MAGhCC,WAAYZ,EAASC,UAAcF,EAAaC,EAASC,IAIzDY,WAAeb,EAASC,UAAcF,EAAaC,EAASC,GAAW,ICdvEa,EACJ,WACEC,KAAKC,SAAW,GAChBD,KAAKE,MAAQ,GACbF,KAAKG,UAAYH,KAAKI,OAAOC,KAAKL,MAClCA,KAAKI,sBAGPE,aAAKC,cACHP,KAAKC,SAASN,KAAKY,GAKnB,kBAHErC,IAAMsB,EAAQQ,EAAKC,SAASR,QAAQc,IACrB,IAAXf,GAAcQ,EAAKC,SAASP,OAAOF,EAAO,iBAKlDgB,cAAMD,GACJP,KAAKE,MAAMP,KAAKY,gBAGlBH,kBACEhC,OAAOqC,sBAAsBT,KAAKG,WAClC,cAAsBH,KAAKC,+BAAkBS,OAC7CxC,IAAMgC,EAAQF,KAAKE,MAAMS,QACzBX,KAAKE,MAAMU,OAAS,EACpB,cAAsBV,wBAAeQ,SCvBzC,IAAMG,EACJ,WACEb,KAAKc,SAAW,IAAIf,eAItBgB,kBAAUvC,EAAUwC,iBAIpBC,+BAIAC,kBAKFhD,IAAMiD,EAAS,IAAIN,ECtBbO,EACJ,SAAa5C,EAAU6C,GACrBrB,KAAKxB,SAAWA,EAChBwB,KAAKqB,SAAWA,EAChBrB,KAAKsB,UAAY,GAEW,YAAxBC,SAASC,WAA0BpD,OAAOqC,sBAAsBT,KAAKiB,MAAMZ,KAAKL,OAC/EuB,SAASE,iBAAiB,mBAAoBzB,KAAKiB,MAAMZ,KAAKL,oBAGrEiB,iBACE,KAAIjB,KAAKsB,UAAUV,OAAS,IAExBW,SAASG,iBAAiB1B,KAAKxB,UAAUoC,OAAS,EACpD,IAAK9B,IAAI6C,EAAI,EAAGA,EAAI3B,KAAKqB,SAAST,OAAQe,IACxC3B,KAAKsB,UAAU3B,KAAKK,KAAKqB,SAASM,OCX1C,IAAMC,EACJ,SAAa3C,GACXe,KAAKf,QAAUA,EACfe,KAAK6B,YAAc,gBASrBC,cAAMC,EAAMC,QACqBtD,IAA3BsB,KAAK6B,YAAYE,KAAqB/B,KAAK6B,YAAYE,GAAQ,IAAIE,EAAoBF,EAAM/B,KAAKf,UACtGe,KAAK6B,YAAYE,GAAMzB,IAAI0B,gBAG7BE,cAAMC,EAAK5B,EAAS6B,EAAgBC,GAClCrC,KAAK8B,KAAK,OAAQ,IAAIQ,EAAUH,EAAK5B,EAAS6B,EAAgBC,iBAGhEE,YAAIJ,EAAK5B,EAAS6B,EAAgBC,GAChCrC,KAAK8B,KAAK,KAAM,IAAIQ,EAAUH,EAAK5B,EAAS6B,EAAgBC,iBAG9DG,mBACE,cAAyBxC,KAAK6B,kCAAwBW,UACtDxC,KAAKyC,MAAQ,MAIjB,IAAMR,EACJ,SAAaF,EAAM9C,GACjBe,KAAK+B,KAAOA,EACZ/B,KAAKf,QAAUA,EACfe,KAAK0C,QAAU,GACf1C,KAAK2C,QAAU3C,KAAK4C,OAAOvC,KAAKL,MAChCA,KAAKf,QAAQwC,iBAAiB,MAAQM,EAAM/B,KAAK2C,sBAGnDrC,aAAK0B,GACHhC,KAAK0C,QAAQ/C,KAAKqC,gBAGpBY,gBAAQC,GACN,cAAqB7C,KAAK0C,8BAAgBE,OAAOC,iBAGnDL,mBACExC,KAAKf,QAAQ6D,oBAAoB,MAAQ9C,KAAK+B,KAAM/B,KAAK2C,SACzD3C,KAAK0C,QAAU,MAInB,IAAMJ,EACJ,SAAaH,EAAK5B,EAAS6B,EAAgBC,GACzCrC,KAAKmC,IAAMA,EACXnC,KAAKO,QAAUA,EACfP,KAAKoC,gBAAoC,IAAnBA,EACtBpC,KAAKqC,iBAAsC,IAApBA,eAGzBO,gBAAQC,GACFA,EAAEE,UAAY/C,KAAKmC,MACrBnC,KAAKO,QAAQsC,GACT7C,KAAKoC,gBACPS,EAAET,iBAEApC,KAAKqC,iBACPQ,EAAER,oBAMVT,EAAYoB,IAAM,EAClBpB,EAAYqB,OAAS,GACrBrB,EAAYsB,IAAM,GAClBtB,EAAYuB,KAAO,GACnBvB,EAAYwB,KAAO,GACnBxB,EAAYyB,GAAK,GACjBzB,EAAY0B,MAAQ,GACpB1B,EAAY2B,KAAO,GCpFnBrF,IAAMsF,EAAanF,EAAGM,KAAK,SCArB8E,EAAS,GAETC,EACJ,SAAaC,EAAI1E,GACfe,KAAK2D,GAAKA,EACV3D,KAAKf,QAAUA,EACfe,KAAK4D,QAAU,GACf5D,KAAK6D,QAAU,EACf7D,KAAK8D,SAAW,KAChBL,EAAO9D,KAAKK,qHAGd0D,EAAOK,sBAAcJ,GACnB,cAAoBF,mBAAfvF,IAAM8F,OAAiB,GAAIA,EAAMC,cAAgBjE,MAAQgE,EAAML,KAAOA,EAAI,OAAOK,EACtF,OAAO,IAAIhE,KAAK2D,IAGlBD,EAAOQ,2BAAmBjF,GACxB,cAAoBwE,mBAAfvF,IAAM8F,OAAiB,GAAIA,EAAM/E,UAAYA,EAAS,OAAO+E,EAClE,OAAO,IAAIhE,MAAK,EAAOf,IAGzByE,EAAOS,mBAAWC,EAAQC,GACxBnG,IAAMyF,EAAKS,EAAOnF,QAAQqF,aAAad,GAC5B,OAAPG,GAEUU,EAAiBN,aAAaJ,GACtCrD,IAAI8D,IAGZV,EAAOa,uBAAeH,EAAQI,EAAkBC,GAE9C,QADsB/F,IAAlB+F,IAA6BA,EAAgBD,EAAiBhG,UAC5C,KAAlBiG,EAGJ,IAFA3F,IAAIG,EAAUmF,EAAOnF,QAAQyF,cAEtBzF,GAAS,CACd,GAAIA,EAAQ0F,UAAUC,SAASR,EAAOH,YAAYzF,UAAW,OAE7D,GAAIS,EAAQ0F,UAAUC,SAASH,GAG7B,YAFcD,EAAiBN,kBAAkBjF,GAC3CqB,IAAI8D,GAGZnF,EAAUA,EAAQyF,kBAIXlG,wBAAc,MAAO,gBAEhC8B,aAAK8D,GACH,IAAsC,IAAlCpE,KAAK4D,QAAQnE,QAAQ2E,GAIzB,OAHApE,KAAK4D,QAAQjE,KAAKyE,GAClBA,EAAOS,SAAS7E,OAER,GACN,KAAsB,OAAjBA,KAAK8E,QACV,KAAMV,EAAOW,UACXX,EAAOY,OAAM,GAAO,GACpB,MAEF,QACEhF,KAAK8D,SAAWM,EAChBpE,KAAK6D,OAAS7D,KAAK4D,QAAQnE,QAAQ2E,GACnCA,EAAOY,OAAM,GAAM,OAIrBpE,sBAAY,OAAOZ,KAAK4D,QAAQhD,UAEhCpB,qBAAW,OAAOQ,KAAK6D,UAEvBrE,mBAAOX,GACLA,GAAS,GAAKA,GAASmB,KAAKY,QAAUZ,KAAK6D,SAAWhF,IACrC,OAAjBmB,KAAK8E,SAAkB9E,KAAK8E,QAAQE,OAAM,GAC9ChF,KAAK6D,OAAShF,EACdmB,KAAK8D,SAAW9D,KAAK6D,QAAU,EAAI7D,KAAK4D,QAAQ5D,KAAK6D,QAAU,KAC1C,OAAjB7D,KAAK8E,SAAkB9E,KAAK8E,QAAQE,OAAM,GAC9ChF,KAAKgF,YAGHF,uBAAa,OAAO9E,KAAK8D,YAEzBgB,qBAASV,GACXpE,KAAKR,MAAQQ,KAAK4D,QAAQnE,QAAQ2E,gBAGpCY,uFCxFF,IAAMC,EACJ,SAAahG,EAASiG,GACpBlF,KAAKf,QAAUA,EACfe,KAAKkF,WAAaA,EAClBlF,KAAKmF,aAAenF,KAAKf,QAAQkG,aAAanF,KAAKkF,WAAWE,eAC9DpF,KAAKf,QAAQwC,iBAAiB,QAASzB,KAAKqF,MAAMhF,KAAKL,OACvDA,KAAKsF,SAAW,IAAIC,iBAAiBvF,KAAKwF,OAAOnF,KAAKL,OACtDA,KAAKyF,uDAGPA,mBACEzF,KAAKsF,SAASG,QAAQzF,KAAKf,QAAS,CAAEyG,YAAY,iBAGpDL,eAAOxC,GACL7C,KAAKkF,WAAWS,OAAO3F,KAAKmF,2BAG9BK,gBAAQI,cACNA,EAAUC,kBAASC,GACK,eAAlBA,EAAS/D,MAAyB+D,EAASV,gBAAkBpF,EAAKkF,WAAWE,eAAepF,EAAKkF,WAAWS,OAAO3F,EAAK+E,2BAIhIC,eAAOnG,GACAmB,KAAKmF,eACNnF,KAAKsF,UAAUtF,KAAKsF,SAASS,aACjC/F,KAAKf,QAAQ+G,aAAahG,KAAKkF,WAAWE,cAAevG,GACrDmB,KAAKsF,UAAUtF,KAAKyF,cAGtBV,yBACF,MAAoE,SAA7D/E,KAAKf,QAAQqF,aAAatE,KAAKkF,WAAWE,uDC3BrDlH,IAAM+H,EAAc,GAEdC,EACJ,SAAajH,GACXe,KAAKf,QAAUA,EACfe,KAAK2D,GAAK1E,EAAQ0E,GAClB3D,KAAKmG,QAAU,GACfnG,KAAK+E,UAAY,KACjB/E,KAAKoG,UAAYpG,KAAKiE,YAAYzF,SAClCwB,KAAKqG,SAAWrG,KAAKoG,UAAY,KAAOpG,KAAK+B,KAAK4B,GAClD3D,KAAKoF,cAAgBpF,KAAK+B,KAAKuE,KAAO,QAAUtG,KAAK+B,KAAK4B,GAAKtF,EAAGM,KAAKqB,KAAK+B,KAAK4B,IAEjFzF,IAAMiI,EAAU5E,SAASG,iBAAiB1B,KAAK+B,KAAKuE,wBAA0BtG,aAAc3B,EAAGM,KAAKH,SAAS,WAAYwB,KAAK2D,KAE9H,GAAIwC,EAAQvF,OAAS,EAAG,IAAK9B,IAAI6C,EAAI,EAAGA,EAAIwE,EAAQvF,OAAQe,IAAK3B,KAAKuG,UAAUJ,EAAQxE,IAExF3B,KAAK+E,WAA+B,IAAnB/E,KAAK+E,UACtB/E,KAAKgF,MAAMhF,KAAK+E,WAAW,GAE3B/E,KAAKgE,oKAGPA,iBACEN,EAAiBS,UAAUnE,KAAMA,KAAKwE,kBACtCd,EAAiBa,cAAcvE,KAAMA,KAAKwE,mBAG5C0B,EAAOM,eAAOC,GAGZ,IAFAvI,UAAiBwI,MAAMC,UAAUhG,MAAMD,KAAK+F,EAAK/E,qBAAqB1B,iCAEjE9B,IAAMe,OAAqBgH,EAAYtG,KAAK,IAAIK,KAAKf,QAGxD8C,oBAAU,OAAO/B,KAAKiE,YAAYlC,MAEtC6E,EAAW7E,oBAAU,OAAO,MAE5B6E,EAAWpI,wBAAc,MAAO,gBAEhC+H,mBAAWtH,GACTf,IAAM2I,EAAS7G,KAAK8G,cAAc7H,GAC9B4H,EAAO1B,eACc,OAAnBnF,KAAK+E,UACP/E,KAAK+E,UAAY8B,EAAO9B,UACnB8B,EAAO7B,MAAMhF,KAAK+E,YAE3B/E,KAAKmG,QAAQxG,KAAKkH,MAGhBrC,gCAAsB,OAAOd,eAEjCoD,uBAAeD,GACb,OAAO,IAAI5B,EAAiB4B,EAAQ7G,mBAGtC+G,oBACM/G,KAAK+E,iBAEUrG,IAAfsB,KAAKgE,QAAqBhE,KAAKgE,MAAMc,QAAU9E,MACnDA,KAAKgF,OAAM,iBAGbgC,mBACOhH,KAAK+E,iBAESrG,IAAfsB,KAAKgE,QAAqBhE,KAAKgE,MAAMc,QAAU,MACnD9E,KAAKgF,OAAM,iBAGbA,eAAOnG,EAAOoI,GACZjH,KAAK+E,UAAYlG,EACbA,EAAOgB,EAASG,KAAKf,QAASe,KAAKqG,UAClCvG,EAAYE,KAAKf,QAASe,KAAKqG,UACpC,IAAKvH,IAAI6C,EAAI,EAAGA,EAAI3B,KAAKmG,QAAQvF,OAAQe,IAAK3B,KAAKmG,QAAQxE,GAAGqD,MAAMnG,GACpE,IAAKA,EAAO,cAAyBoH,mBAApB/H,IAAMgH,OAA+BA,IAAelF,MAAQA,KAAKf,QAAQ2F,SAASM,EAAWjG,UAAUiG,EAAWgC,sBAGrIA,+BAEAvB,gBAAQR,GACN,GAAKnF,KAAKiE,YAAYlC,KAAKoF,WAEzB,QAAQ,GACN,KAAMhC,EACN,KAAKnF,KAAK+E,UACR/E,KAAKgH,UACL,MAEF,QACEhH,KAAK+G,gBAT4B/G,KAAK+G,wBAc9ClC,kBAAUb,GACRhE,KAAKgE,MAAQA,KAGXoD,wBACF,OAAIpH,KAAKf,UAAYsC,SAAS8F,gBAC1BrH,KAAKf,QAAQyC,iBAAiB,UAAUd,OAAS,KACjDZ,KAAKmG,QAAQmB,eAAMT,GAAa,OAAOA,EAAOO,0BAIpDG,iBACE,IAAKzI,IAAI6C,EAAI,EAAGA,EAAI3B,KAAKmG,QAAQvF,OAAQe,IAAK,CAC5CzD,IAAM2I,EAAS7G,KAAKmG,QAAQxE,GAC5B,GAAIkF,EAAO1B,aAET,YADA0B,EAAO5H,QAAQsI,8EClHhBrJ,IAAMsJ,EAAmB,CAC9BC,OAAQ,CACN9D,GAAI,WACJ2C,MAAM,EACNa,YAAY,GAEdO,OAAQ,CACN/D,GAAI,WACJ2C,MAAM,EACNa,YAAY,ICHVQ,oLACJC,EAAIR,wBACF,OAAOpH,KAAKf,UAAYsC,SAAS8F,yDAFRpC,GCJvB4C,EAAa,GAEbC,qNACJF,EAAIR,wBACF,YAAqB1I,IAAjBsB,KAAK8E,QAA8B,KAChC9E,KAAK8E,QAAQsC,UAGtBU,EAAO/G,kBAAUgH,EAAWtD,GAC1BoD,EAAWE,GAAatD,GAG1BmC,EAAWiB,0BAAgB,OAAOA,0EAVPnE,GCFvBsE,EAAiB3J,EAAG,YCUpB4J,cACJ,WAAahJ,GACXiJ,YAAMjJ,GAENA,EAAQwC,iBAAiB,gBAAiBzB,KAAKmI,cAAc9H,KAAKL,8QAGpEgE,iBACE,IAAK9F,IAAM6J,KAAaD,EAAeD,WAGrC,IAFA/I,IAAIG,EAAUe,KAAKf,QAAQyF,cAEpBzF,GAAS,CACd,GAAIA,EAAQ0F,UAAUC,SAASmD,GAM7B,YALoD,iBAAzCD,EAAeD,WAAWE,GACnCrE,EAAiBa,cAAcvE,KAAM8H,EAAgBA,EAAeD,WAAWE,IAE/ErE,EAAiBa,cAAcvE,KAAM8H,EAAeD,WAAWE,KAKnE9I,EAAUA,EAAQyF,cAItBwD,YAAMlE,kBAGR4D,EAAIpD,gCAAsB,OAAOsD,eAEjChB,uBAAe7H,GACb,OAAO,IAAI0I,EAAe1I,EAASe,OAGrC4G,EAAW7E,oBAAU,OAAOyF,EAAiBC,QAC7Cb,EAAWpI,wBAAc,OAAOwJ,eAEhCG,uBAAetF,GACR7C,KAAK+E,YAAW/E,KAAKf,QAAQmJ,MAAMC,UAAY,iBAGtDrD,eAAOnG,EAAOoI,cACRpI,IAAOmB,KAAKf,QAAQmJ,MAAMC,UAAY,QAC1CrI,KAAKf,QAAQmJ,MAAME,YAAY,cAAe,QAC9CpK,IAAMqK,EAASvI,KAAKf,QAAQuJ,aAC5BxI,KAAKf,QAAQmJ,MAAME,YAAY,cAAeC,EAAS,MACvDvI,KAAKf,QAAQmJ,MAAME,YAAY,cAAe,IAE9ClK,OAAOqC,yCAA4ByH,YAAMlD,aAAMnG,EAAOoI,mBAGxDC,iBACElH,KAAKgF,OAAM,IAGb4C,EAAIa,8BACF,QAAIzI,KAAKmG,QAAQmB,eAAMT,GAAa,OAAOA,EAAOO,aAIpDQ,EAAIR,wBACF,OAAIpH,KAAKf,UAAYsC,SAAS8F,gBAC1BrH,KAAKf,QAAQyC,iBAAiB,UAAUd,OAAS,GAC9CZ,KAAKyI,wFA/DOvC,GCSjBwC,EACJ,SAAalK,EAAUwF,GACrBhE,KAAKxB,SAAWA,EAChBwB,KAAKgE,MAAQA,EACbhE,KAAK2I,SAAW3I,KAAKgE,MAAMtC,iBAAiB1B,KAAKxB,UACjDwB,KAAK4I,SAAW,EAEhB5I,KAAK6I,SAAW7I,KAAK2F,OAAOtF,KAAKL,MACjC5B,OAAOqD,iBAAiB,SAAUzB,KAAK6I,UACvCzK,OAAOqD,iBAAiB,OAAQzB,KAAK6I,uBAIvClD,kBACE3F,KAAKkH,QACL,IAAKpI,IAAI6C,EAAI,EAAGA,EAAI3B,KAAK2I,SAAS/H,OAAQe,IAAK,CAC7CzD,IAAM4K,EAAY9I,KAAK+I,UAAU/I,KAAK2I,SAAShH,IAC3CmH,EAAY9I,KAAK4I,WACnB5I,KAAK4I,SAAWE,GAGpB9I,KAAKgF,qBAGPA,iBACE,IAAKlG,IAAI6C,EAAI,EAAGA,EAAI3B,KAAK2I,SAAS/H,OAAQe,IACxC3B,KAAK2I,SAAShH,GAAGyG,MAAMY,MAAQhJ,KAAK4I,SAAW,EAAI,kBAIvD1B,iBACE,IAAKpI,IAAI6C,EAAI,EAAGA,EAAI3B,KAAK2I,SAAS/H,OAAQe,IACxC3B,KAAK2I,SAAShH,GAAGyG,MAAMY,MAAQ,OAEjChJ,KAAK4I,SAAW,eAGlBG,mBAAWE,GACTnK,IAAIkK,EAAQC,EAAGC,YACTd,EAAQe,iBAAiBF,GAE/B,OADAD,GAASI,SAAShB,EAAMiB,YAAcD,SAAShB,EAAMkB,cC9CzDnL,EAAIE,GAAKA,EACTF,EAAI0B,SAAWA,EACf1B,EAAI2B,YAAcA,EAClB3B,EAAIgD,OAASA,EACbhD,EAAIiD,YAAcA,EAClBjD,EAAIyD,YAAcA,EAClBzD,EAAI+H,WAAaA,EACjB/H,EAAI8G,iBAAmBA,EACvB9G,EAAIuF,iBAAmBA,EACvBvF,EAAIqJ,iBAAmBA,EACvBrJ,EAAI8J,SAAWA,EACf9J,EAAIwJ,eAAiBA,EACrBxJ,EAAI2J,eAAiBA,EACrB3J,EAAIuK,UAAYA,ECvBhB,IAAItH,MAAgB4G,EAAkB,YCFpCC,EAASzB,MAAMjF,aCDjBrD,IAAMqL,EAAmBpL,EAAIE,GAAG,oBAC1BmL,EAAsBrL,EAAIE,GAAG,aCA7BoL,iOAMJC,yBACE1J,KAAK2J,UAAY,IAAIxL,EAAIyD,YAAY5B,KAAKf,SAC1Ce,KAAK2J,UAAUzH,KAAK/D,EAAIyD,YAAY2B,KAAMvD,KAAK4J,eAAevJ,KAAKL,OAAO,GAAM,GAChFA,KAAK2J,UAAUzH,KAAK/D,EAAIyD,YAAYyB,GAAIrD,KAAK6J,aAAaxJ,KAAKL,OAAO,GAAM,GAC5EA,KAAK2J,UAAUzH,KAAK/D,EAAIyD,YAAYuB,KAAMnD,KAAK8J,UAAUzJ,KAAKL,OAAO,GAAM,GAC3EA,KAAK2J,UAAUzH,KAAK/D,EAAIyD,YAAYsB,IAAKlD,KAAK+J,SAAS1J,KAAKL,OAAO,GAAM,IAG3E4H,EAAIoC,0BACF,IAAKlL,IAAI6C,EAAI,EAAGA,EAAI3B,KAAK4D,QAAQhD,OAAQe,IAAK,GAAI3B,KAAK4D,QAAQjC,GAAG8G,eAAgB,OAAO9G,EACzF,OAAQ,eAOViI,0BACE9K,IAAIU,EAAQQ,KAAKgK,YACF,IAAXxK,MACJA,GACaQ,KAAKY,SAAQpB,EAAQ,GAClCQ,KAAK4D,QAAQpE,GAAO+H,sBAOtBsC,wBACE/K,IAAIU,EAAQQ,KAAKgK,YACF,IAAXxK,MACJA,EACY,IAAGA,EAAQQ,KAAKY,OAAS,GACrCZ,KAAK4D,QAAQpE,GAAO+H,sBAMtBuC,sBAC2B,IAArB9J,KAAKgK,YACThK,KAAK4D,QAAQ,GAAG2D,qBAMlBwC,qBAC2B,IAArB/J,KAAKgK,YACThK,KAAK4D,QAAQ5D,KAAKY,OAAS,GAAG2G,SAGhCX,EAAWpI,wBAAc,OAAO+K,eAEhCvE,iBACEkD,YAAMlD,iBACe,OAAjBhF,KAAK8E,SAAkB9E,KAAK8E,QAAQyC,gFA/DdpJ,EAAI2J,gBCAlC3J,EAAIsL,gBAAkBA,ECCtBtL,EAAI2J,eAAe/G,SAASyI,EAAqBC,GCFjDvL,IAAM+L,EAAkB9L,EAAIE,GAAGG,SAAS,OAClC0L,EAAyB/L,EAAIE,GAAGG,SAAS,cACzC2L,EAAmChM,EAAIE,GAAGG,SAAS,yBCEzD,IAAIL,EAAIiD,YAAY8I,EAAwB,YCA1C,IAFAhM,IAAM8F,EAAQzC,SAASG,iBAAiByI,GAClCC,EAAiB,GACdzI,EAAI,EAAGA,EAAIqC,EAAMpD,OAAQe,IAChCyI,EAAezK,KAAK,IAAIxB,EAAIuK,UAAUuB,EAAiBjG,EAAMrC,QCLjEzD,IAAMmM,EAAiBlM,EAAIE,GAAGG,SAAS,SACjC8L,EAAcnM,EAAIE,GAAG,SACrBkM,EAAkBpM,EAAIE,GAAG,aACzBmM,EAAsBrM,EAAIE,GAAG,iBAC7BoM,EAAsBtM,EAAIE,GAAGG,SAAS,eCUtCkM,EAda,CACjB,iBACA,UACA,yBACA,wBACA,yBACA,2BACA,kBACA,kBACA,qDACA,gCACA,WAG4B9K,OAMxB+K,EAJW,CACf,uDAGwB/K,OAEpBgL,WAAe3L,EAAS4L,GAC5B,GAAoD,WAAhDzM,OAAO+K,iBAAiBlK,GAAS6L,WAAyB,OAAO,EAGrE,SAFkBpM,IAAdmM,IAAyBA,EAAY5L,GAElC4L,EAAUjG,SAAS3F,IAAU,CAClC,GAAiD,SAA7Cb,OAAO+K,iBAAiBlK,GAAS8L,QAAoB,OAAO,EAChE9L,EAAUA,EAAQyF,cAGpB,OAAO,GAGHsG,EACJ,SAAaC,EAAQC,GACnBlL,KAAKf,QAAU,KACfe,KAAKqH,cAAgB,KACrBrH,KAAKiL,OAASA,EACdjL,KAAKkL,SAAWA,EAChBlL,KAAKmL,QAAUnL,KAAKoL,KAAK/K,KAAKL,MAC9BA,KAAKqL,SAAWrL,KAAK4C,OAAOvC,KAAKL,MACjCA,KAAK8E,QAAU,iEAGjB8C,EAAI0D,uBAAa,OAAwB,OAAjBtL,KAAKf,qBAE7BsM,cAAMtM,GACAe,KAAKsL,SAAStL,KAAKwL,SAEvBxL,KAAKf,QAAUA,EACfe,KAAKyL,YAAa,EAClBzL,KAAKoL,OAEDpL,KAAKiL,QAAQjL,KAAKiL,sBAGxBG,gBACOR,EAAY5K,KAAKf,SAKtBe,KAAK0L,WAJHvN,EAAIgD,OAAOL,SAASN,KAAKR,KAAKmL,sBAOlCO,oBACE,GAAK1L,KAAKyL,WAAV,CACAzL,KAAKyL,YAAa,EAClBvN,IAAMyN,EAAa3L,KAAK2L,WACpBA,EAAW/K,QAAQ+K,EAAW,GAAGpE,QACrCvH,KAAKf,QAAQ+G,aAAa,cAAc,GACxChG,KAAKf,QAAQwC,iBAAiB,UAAWzB,KAAKqL,UAE9CrL,KAAK4L,SAAW,GAChB5L,KAAK6L,KAAKtK,SAASuK,oBAGrBD,cAAME,GACJ,cAAoBA,EAAKC,yBAAU,CAA9B9N,IAAM+N,OACLA,IAAUjM,KAAKf,UACfgN,EAAMrH,SAAS5E,KAAKf,SACtBe,KAAK6L,KAAKI,GAGZjM,KAAK4L,SAASjM,KAAK,IAAIuM,EAAQD,mBAInCrJ,gBAAQC,GACN,GAAkB,IAAdA,EAAEE,QAAN,CAEA7E,IAAMyN,EAAa3L,KAAK2L,WACxB,GAA0B,IAAtBA,EAAW/K,OAAf,CAEA1C,IAAMiO,EAAQR,EAAW,GACnBS,EAAOT,EAAWA,EAAW/K,OAAS,GAEtCpB,EAAQmM,EAAWlM,QAAQ8B,SAAS8F,eAEtCxE,EAAEwJ,UACCrM,KAAKf,QAAQ2F,SAASrD,SAAS8F,gBAAkB7H,EAAQ,GAC5DqD,EAAET,iBACFgK,EAAK7E,UACIhG,SAAS8F,cAAciF,SAAW,GAAKX,EAAWnM,EAAQ,GAAG8M,SAAW,KACjFzJ,EAAET,iBACFuJ,EAAWnM,EAAQ,GAAG+H,SAGnBvH,KAAKf,QAAQ2F,SAASrD,SAAS8F,gBAAkB7H,IAAUmM,EAAW/K,OAAS,IAAgB,IAAXpB,EAG9E+B,SAAS8F,cAAciF,SAAW,IAC3CzJ,EAAET,iBACFuJ,EAAWnM,EAAQ,GAAG+H,UAJtB1E,EAAET,iBACF+J,EAAM5E,YAQZK,EAAI+D,0BASF,eARIY,EAAa,UAAIvM,KAAKf,QAAQyC,iBAAiBgJ,IAK7C8B,EAAY,UAAIxM,KAAKf,QAAQyC,iBAAiB,aAChD+K,EAAS,SAEUD,kBAAW,CAA7BtO,IAAMwO,OAE+DD,EAApE,UAAIC,EAAShL,iBAAiB,8BAA8Bd,OAAiB6L,EAAOE,OAAO,UAAID,EAAShL,iBAAiB,qCACpH,UAAIgL,EAAShL,iBAAiB,gCAAgCd,OAAiB6L,EAAOE,OAAO,UAAID,EAAShL,iBAAiB,uCACtH+K,EAAOE,OAAO,UAAID,EAAShL,iBAAiB,wBAAwBhC,OAAO,EAAG,IAE9F6M,EAAaA,EAAWK,iBAAQC,GAC9B,OAAsC,IAA/BJ,EAAOhN,QAAQoN,MAGxB3O,IAAM4O,EAAW,UAAI9M,KAAKf,QAAQyC,iBAAiBiJ,IAEnDmC,EAASC,eAAMC,EAAGC,UAAMD,EAAEV,SAAWW,EAAEX,YAEvCpO,IAAMgP,EAAeX,EAAWK,iBAAQ3N,UAA2C,IAA/B6N,EAASrN,QAAQR,MAIrE,OAHoB6N,EAASH,OAAOO,GACNN,iBAAQ3N,SAAiC,OAArBA,EAAQqN,UAAqB1B,EAAY3L,EAASe,EAAKf,yBAK3GuM,kBACE,GAAKxL,KAAKsL,QAAV,CACAtL,KAAKyL,YAAa,EAElBzL,KAAKf,QAAQkO,gBAAgB,cAC7BnN,KAAKf,QAAQ6D,oBAAoB,UAAW9C,KAAKqL,UACjDrL,KAAKf,QAAU,KAEf,cAAsBe,KAAK4L,+BAAkBwB,SAC7CpN,KAAK4L,SAAW,GAEZ5L,KAAKkL,UAAUlL,KAAKkL,oDAI5B,IAAMgB,EACJ,SAAajN,GACXe,KAAKf,QAAUA,EACfe,KAAKqN,OAASpO,EAAQqF,aAAa,eACnCtE,KAAKsN,MAAQrO,EAAQqF,aAAa,SAElCtE,KAAKf,QAAQ+G,aAAa,eAAe,GACzChG,KAAKf,QAAQ+G,aAAa,QAAS,iBAGrCoH,kBACsB,OAAhBpN,KAAKqN,OAAiBrN,KAAKf,QAAQkO,gBAAgB,eAClDnN,KAAKf,QAAQ+G,aAAa,cAAehG,KAAKqN,QAEhC,OAAfrN,KAAKsN,MAAgBtN,KAAKf,QAAQkO,gBAAgB,SACjDnN,KAAKf,QAAQ+G,aAAa,QAAShG,KAAKsN,QClLjD,IAAMC,cACJ,aACErF,aACAlI,KAAKuL,KAAO,IAAIP,4GAGlBhG,eAAOnG,EAAOoI,GACZiB,YAAMlD,gBAAMnG,EAAOoI,GACE,OAAjBjH,KAAK8E,QAAkB9E,KAAKuL,KAAKC,SAChCxL,KAAKuL,KAAKA,KAAKvL,KAAK8E,QAAQ7F,aATXd,EAAIuF,kBCDxB8J,6JAIJxI,eAAOnG,GACLqJ,YAAMlD,gBAAMnG,OALUV,EAAI8G,kBCSxBjB,EAAQ,IAAIuJ,EAEZE,cACJ,WAAaxO,GACXiJ,YAAMjJ,GACNe,KAAK8L,KAAO9L,KAAKf,QAAQyO,cAAcjD,GACvCzK,KAAK2N,eAAiB,EACtB3N,KAAK4N,UAAY5N,KAAK6N,OAAOxN,KAAKL,MAAM,GACxCA,KAAK8N,SAAW9N,KAAK6N,OAAOxN,KAAKL,MAAM,GACvCA,KAAK+N,SACL/N,KAAK6N,QAAO,8MAGdE,kBACE/N,KAAKf,QAAQwC,iBAAiB,QAASzB,KAAKqF,MAAMhF,KAAKL,OAEvDA,KAAKgO,YAAc,IAAI7P,EAAIyD,YAAY5B,KAAKf,SAC5Ce,KAAKgO,YAAY9L,KAAK/D,EAAIyD,YAAYqB,OAAQjD,KAAKgH,QAAQ3G,KAAKL,OAAO,GAAM,GAEzEA,KAAK8L,OACP9L,KAAK8L,KAAKrK,iBAAiB,SAAUzB,KAAK4N,WAC1CxP,OAAOqD,iBAAiB,SAAUzB,KAAK8N,UACvC1P,OAAOqD,iBAAiB,oBAAqBzB,KAAK8N,wBAItDzI,eAAOxC,GACD7C,KAAK8L,MAAQ9L,KAAKf,UAAY4D,EAAEoL,QAAQjO,KAAKgH,uBAGnDhD,iBACEA,EAAM1D,IAAIN,mBAGZgF,eAAOnG,EAAOoI,GACZjH,KAAKkO,cAAcrP,GACdA,EAGEoI,GAASjH,KAAK6N,QAAO,GAFrB5G,GAASjH,KAAKuH,QAIrBW,YAAMlD,gBAAMnG,EAAOoI,gBAOrBiH,sBAAcC,GACRA,GACFhQ,EAAI2B,YAAYyB,SAAS6M,gBAAiB7D,GAC1ChJ,SAASuK,KAAK1D,MAAMiG,IAAM,GAC1BjQ,OAAOkQ,OAAO,EAAGtO,KAAK2N,kBAEjBpM,SAAS6M,gBAAgBzJ,UAAUC,SAAS2F,KAC/CvK,KAAK2N,eAAiBvP,OAAOmQ,SAE/BhN,SAASuK,KAAK1D,MAAMiG,KAA6B,EAAvBrO,KAAK2N,eAAsB,KACrDxP,EAAI0B,SAAS0B,SAAS6M,gBAAiB7D,iBAQ3CsD,gBAAQW,EAAY3L,cACb7C,KAAK8L,OACN9L,KAAK8L,KAAK2C,aAAezO,KAAK8L,KAAK4C,aACjC1O,KAAK8L,KAAKtD,aAAexI,KAAK8L,KAAK6C,WAAa3O,KAAK8L,KAAK2C,aAC5DtQ,EAAI2B,YAAYE,KAAK8L,KAAMtB,GAE3BrM,EAAI0B,SAASG,KAAK8L,KAAMtB,GAG1BrM,EAAI2B,YAAYE,KAAK8L,KAAMtB,GAGzBgE,IACFxO,KAAK8L,KAAK1D,MAAMC,UAAajK,OAAOwQ,YJnFpB,GImFmD,KAInEnO,kCACET,EAAK8L,KAAK1D,MAAMC,UAAajK,OAAOwQ,YJxFtB,GIwFqD,WAKzEhI,EAAW7E,oBAAU,OAAO5D,EAAIqJ,iBAAiBC,QACjDb,EAAWpI,wBAAc,OAAO8L,eAEhCxD,uBAAe7H,GACb,OAAO,IAAIuO,EAAYvO,EAASe,OAGlC4H,EAAIpD,gCAAsB,OAAO+I,0EA9FfpP,EAAI+H,YCNxB/H,EAAIsP,MAAQA,EACZtP,EAAIqP,YAAcA,EAClBrP,EAAIoP,YAAcA,EAClBpP,EAAI6M,UAAYA,ECLhB,IAAI7M,EAAIiD,YAAYiJ,EAAgB,YCClCoD,EAAMjH,MAAMjF,aCJdrD,IAAM2Q,EAAmB1Q,EAAIE,GAAG,OAC1ByQ,EAAwB3Q,EAAIE,GAAG,aAC/B0Q,EAAwB5Q,EAAIE,GAAG,aAC/B2Q,GAA8B7Q,EAAIE,GAAG,0BACrC4Q,GAAwB9Q,EAAIE,GAAG,QCG/B6Q,eACJ,WAAavL,EAAI1E,GACfiJ,YAAMvE,EAAI1E,GAEVe,KAAKmP,MAAQ,GAEbnP,KAAKoP,QAAUnQ,EAAQyO,kBAAkBoB,GAEzCvN,SAASE,iBAAiB,WAAYzB,KAAKqP,SAAShP,KAAKL,OACzD5B,OAAOqD,iBAAiB,SAAUzB,KAAK6N,OAAOxN,KAAKL,OACnD5B,OAAOqD,iBAAiB,oBAAqBzB,KAAK6N,OAAOxN,KAAKL,OAC9DA,KAAK6N,sKAGPjH,EAAWpI,wBAAc,OAAOqQ,eAEhCvO,aAAK8D,GACH8D,YAAM5H,cAAI8D,GAENA,EAAOnF,QAAQ0F,UAAUC,SAASqK,KACpCjP,KAAKmP,MAAMxP,KAAK,IAAI2P,GAAelL,EAAQpE,KAAKoP,QAAQG,wBAAwBC,qBAIpFH,kBAAUxM,cACRpC,kCACuB,OAAjBT,EAAK8E,SAAqB9E,EAAK8E,QAAQsC,WAAUpH,EAAKR,OAAS,OAIvEoI,EAAIpI,qBAAW,OAAO0I,YAAM1I,OAE5BoI,EAAIpI,mBAAOX,IACM,IAAXA,GAAiC,OAAjBmB,KAAK8E,SAAoB9E,KAAK8E,QAAQsC,UAAUpH,KAAK8E,QAAQyC,QACjFW,YAAM1I,MAAQX,eAGhBgP,kBAGE,IAFA3P,IAAMsR,EAAQxP,KAAKoP,QAAQG,wBAAwBC,YAEhCxP,KAAKmP,4BAAYM,MAAMD,4EAxCrBrR,EAAI2J,gBA4CvBwH,GACJ,SAAaI,EAAUF,GACrBxP,KAAK2P,WAAWD,GAChB1P,KAAKyP,MAAMD,iBAGbG,oBAAYD,GACV1P,KAAKf,QAAUyQ,EAASzQ,QAExB,cAAqByQ,EAASvJ,wBAAS,CAAlCjI,IAAM2I,OACT,GAAKA,EAAO1B,aAAZ,CACAnF,KAAK6G,OAASA,EAAO5H,QACrB,OAIF,IADAH,IAAI8Q,EAAO5P,KAAKf,QAAQyF,cACjBkL,GAAM,CACX,GAAIA,EAAKjL,UAAUC,SAASmK,GAAwB,CAClD/O,KAAK4P,KAAOA,EACZ,MAEFA,EAAOA,EAAKlL,6BAIhB+K,eAAOD,GACLtR,IAAM2R,EAAS1G,iBAAiBnJ,KAAKf,SAC/B+J,EAAQ8G,WAAWD,EAAO7G,OACnBhJ,KAAK6G,OAAO0I,wBAAwBQ,KAEtC/G,EAAQwG,EAAOrR,EAAI0B,SAASG,KAAK4P,KAAMZ,IAC7C7Q,EAAI2B,YAAYE,KAAK4P,KAAMZ,KCjFpC7Q,EAAI+Q,WAAaA,GCCjB/Q,EAAI2J,eAAe/G,SAAS8N,EAAkBK,ICF9ChR,IAAM8R,GAAc7R,EAAIE,GAAGM,KAAK,SAC1BsR,GAAkB9R,EAAIE,GAAGM,KAAK,cCD9BuR,GACJ,WACElQ,KAAKmQ,qBAGPA,2BACEnQ,KAAKoQ,OAASC,aAAaC,QAAQ,UAC/BD,aAAaC,QAAQ,UACrB,KAEgB,OAAhBtQ,KAAKoQ,SACHhS,OAAOmS,WAAW,gCAAgCC,SACpDxQ,KAAKoQ,OAAS,OACdC,aAAaI,QAAQ,SAAU,SAC1BzQ,KAAKoQ,OAAS,SAGvBpQ,KAAK0Q,KAAOnP,SAAS6M,gBAED,SAAhBpO,KAAKoQ,OACFpQ,KAAK0Q,KAAKvL,aAAa8K,KAG1BjQ,KAAK0Q,KAAKvD,gBAAgB8C,IAC1BjQ,KAAK0Q,KAAK1K,aAAagK,GAAa,QAEpCW,uBACE3Q,EAAK0Q,KAAK1K,aAAaiK,GAAiB,MACvC,MAPHjQ,KAAK0Q,KAAK1K,aAAagK,GAAa,QASjChQ,KAAK0Q,KAAK1K,aAAagK,GAAa,SAE3ChQ,KAAKsF,SAAW,IAAIC,iBAAiBvF,KAAKwF,OAAOnF,KAAKL,OACtDA,KAAKsF,SAASG,QAAQzF,KAAK0Q,KAAM,CAAEhL,YAAY,kBAGjDF,gBAAQI,cACNA,EAAUC,kBAASC,GACjB,GAAsB,eAAlBA,EAAS/D,MAAyB+D,EAASV,gBAAkB4K,GAAa,CAC5E9R,IAAMkS,EAASpQ,EAAK0Q,KAAKpM,aAAa0L,IACvB,SAAXI,EACFC,aAAaI,QAAQ,SAAU,QACX,UAAXL,GACTC,aAAaI,QAAQ,SAAU,cC1CzCtS,EAAI+R,OAASA,GCDbhS,IAAM0S,GAAoB,eAAezS,EAAIE,GAAGG,SAAS,eAAgB,SACnEqS,GAAkB1S,EAAIE,GAAGG,SAAS,eAAgB,KAClDsS,GAAa3S,EAAIE,GAAGM,KAAK,SCFzBoS,GACJ,WACE/Q,KAAKoF,cAAgB0L,GACrB9Q,KAAKgR,MAAQ,KACbhR,KAAKyM,OAASlL,SAASG,iBAAiBkP,IAExC,IAAK,IAAIjP,EAAI,EAAGA,EAAI3B,KAAKyM,OAAO7L,OAAQe,IACtC3B,KAAKyM,OAAO9K,GAAGF,iBAAiB,SAAUzB,KAAK2F,OAAOtF,KAAKL,OAG7DA,KAAKsF,SAAW,IAAIC,iBAAiBvF,KAAKwF,OAAOnF,KAAKL,OACtDA,KAAKyF,UACLzF,KAAKgF,sBAGPS,mBACEzF,KAAKsF,SAASG,QAAQlE,SAAS6M,gBAAiB,CAAE1I,YAAY,kBAGhEF,gBAAQI,cACNA,EAAUC,kBAASC,GACK,eAAlBA,EAAS/D,MAAyB+D,EAASV,gBAAkBpF,EAAKoF,eACpEpF,EAAKgF,yBAKXA,iBACE9G,IAAM8S,EAAQzP,SAAS6M,gBAAgB9J,aAAatE,KAAKoF,eACzDpF,KAAKiR,YAAa,EAClB,IAAK,IAAItP,EAAI,EAAGA,EAAI3B,KAAKyM,OAAO7L,OAAQe,IACtC3B,KAAKyM,OAAO9K,GAAGuP,QAAUlR,KAAKyM,OAAO9K,GAAG9C,QAAUmS,EAEpDhR,KAAKiR,YAAa,gBAGpBtL,kBACM3F,KAAKiR,aACLjR,KAAKsF,UAAUtF,KAAKsF,SAASS,aACjC/F,KAAKgR,MAAQzP,SAASmM,cAAckD,GAAoB,YACpD5Q,KAAKgR,MACPzP,SAAS6M,gBAAgBpI,aAAahG,KAAKoF,cAAepF,KAAKgR,MAAMnS,OAErE0C,SAAS6M,gBAAgBjB,gBAAgBnN,KAAKoF,eAE5CpF,KAAKsF,UAAUtF,KAAKyF,YCxC5B,IAAItH,EAAIiD,qBAAqB4O,OAAgB,YCH3C,IAAIE,MDIN,IAAI/R,EAAIiD,eAAeyP,GAAmB,YEJxC,IAAIE,MCFN7S,IAAMiT,GAAiBhT,EAAIE,GAAG,YACxB+S,GAAsBjT,EAAIE,GAAG,kBCCnCF,EAAI2J,eAAe/G,SAASoQ,GAAgBC,ICF5ClT,IAAMmT,GAAiBlT,EAAIE,GAAGG,SAAS,SAEjC8S,GAA8BnT,EAAIE,GAAGG,SAAS,iBAAgBL,EAAIE,GAAGG,SAAS,wBAC9E4E,GAAO,OACPE,GAAQ,QACRiO,GAAepT,EAAIE,GAAG,iBACtBmT,GAAoBrT,EAAIE,GAAG,sBAC3BoT,GAAqBtT,EAAIE,GAAG,uBAC5BqT,GAAgBvT,EAAIE,GAAG,kBCCvBsT,GACJ,SAAaC,GACX5R,KAAKmQ,KAAKyB,iBAGZzB,cAAMyB,GACJ5R,KAAK4R,MAAQA,EACb5R,KAAK6R,UAAY7R,KAAK4R,MAAMlE,cAAc,SAC1C1N,KAAK8R,aAAe9R,KAAK6R,UAAUnE,cAAc,SACjD1N,KAAKmO,aAAenO,KAAK8R,aAAa5I,YAAclJ,KAAK6R,UAAU3I,YACnElJ,KAAK+R,QAAU/R,KAAK6R,UAAUnE,cAAc,WAC5C1N,KAAKgS,cAAgB,EACrBhS,KAAKiS,OAEL/T,IAAM0P,EAAY5N,KAAK2F,OAAOtF,KAAKL,MACnCA,KAAK6R,UAAUpQ,iBAAiB,SAAUmM,GAC1C5N,KAAK2F,uBAGPA,kBACEzH,IAAMgU,EAAYlS,KAAK8R,aAAa5I,YAAclJ,KAAK6R,UAAU3I,YAC7DiJ,EAAsBnS,KAAK6R,UAAU3I,YAAclJ,KAAK4R,MAAM1I,YAC9DgJ,GAAaC,GACfnS,KAAKsO,SACLtO,KAAKoS,iBAEDF,IAAclS,KAAKmO,cAAcnO,KAAKqS,SAE5CrS,KAAKmO,aAAe+D,EACpBC,GAAsB,gBAGxBE,kBACElU,EAAI2B,YAAYE,KAAK4R,MAAOH,IAC5BtT,EAAI2B,YAAYE,KAAK4R,MAAOJ,IAC5BrT,EAAI2B,YAAYE,KAAK4R,MAAOL,IACxBvR,KAAK+R,UACP/R,KAAK6R,UAAUzJ,MAAMkK,UAAY,GACjCtS,KAAK+R,QAAQ3J,MAAMiG,IAAM,GACzBrO,KAAK6R,UAAUzJ,MAAMmK,aAAe,GACpCvS,KAAK+R,QAAQ3J,MAAMoK,OAAS,kBAIhClE,kBACEnQ,EAAI0B,SAASG,KAAK4R,MAAOL,IACzBvR,KAAKyS,kCAIPR,gBACE/T,IAAMwU,EAAcnR,SAASoR,cAAc,OAC3CD,EAAYxT,UAAYwS,GACxB1R,KAAK4R,MAAMgB,aAAaF,EAAa1S,KAAK6R,WAC1Ca,EAAYG,YAAY7S,KAAK6R,WAC7B7R,KAAK8S,kBAAoBJ,gBAI3BD,6BACEvU,IAAM6U,EAAkB/S,KAAKgT,kBAAkB5P,IACzC6P,EAAmBjT,KAAKgT,kBAAkB1P,IAGK,QAAjD/B,SAAS6M,gBAAgB9J,aAAa,QACxCtE,KAAKkT,oBAAoB5P,GAAOyP,GAChC/S,KAAKkT,oBAAoB9P,GAAM6P,KAE/BjT,KAAKkT,oBAAoB9P,GAAM2P,GAC/B/S,KAAKkT,oBAAoB5P,GAAO2P,kBAKpCD,2BAAmBG,GACjBrU,IAAIsU,EAAW,EAKf,OAHqD,QAAjD7R,SAAS6M,gBAAgB9J,aAAa,SACxC8O,GAAY,GAEND,GACN,KAAK/P,GACH,OAAOpD,KAAK6R,UAAUwB,WAAaD,EACrC,KAAK9P,GACH,OAAOtD,KAAK8R,aAAa5I,YAAclJ,KAAK6R,UAAU3I,YAAclJ,KAAK6R,UAAUwB,WAAaD,EAClG,QACE,OAAO,iBAKbhB,yBACE,GAAIpS,KAAK+R,QAAS,CAChB7T,IAAMkK,EAAQe,iBAAiBnJ,KAAK+R,SAC9BuB,EAAYtT,KAAK+R,QAAQvJ,aAAeY,SAAShB,EAAMkK,WAAalJ,SAAShB,EAAMmK,cACzFvS,KAAKgS,cAAgBsB,EACjBtT,KAAK4R,MAAMjN,UAAUC,mCACvB5E,KAAK6R,UAAUzJ,MAAMmK,aAAevS,KAAKgS,cAAgB,KACzDhS,KAAK+R,QAAQ3J,MAAMoK,QAAUxS,KAAKgS,cAAgB,OAElDhS,KAAK6R,UAAUzJ,MAAMkK,UAAYtS,KAAKgS,cAAgB,KACtDhS,KAAK+R,QAAQ3J,MAAMiG,KAAOrO,KAAKgS,cAAgB,qBAOrDkB,6BAAqBC,EAAMI,GAErBA,GD7Gc,EC8GZJ,IAAS/P,GAAMjF,EAAI2B,YAAYE,KAAK4R,MAAOJ,IACtC2B,IAAS7P,IAAOnF,EAAI2B,YAAYE,KAAK4R,MAAOH,IAEjD0B,IAAS/P,GAAMjF,EAAI0B,SAASG,KAAK4R,MAAOJ,IACnC2B,IAAS7P,IAAOnF,EAAI0B,SAASG,KAAK4R,MAAOH,KC3HxDtT,EAAIwT,MAAQA,GCAZzT,IAAMsV,GAAS,GAET7N,cACJ,IAAK7G,IAAI6C,EAAI,EAAGA,EAAI6R,GAAO5S,OAAQe,IAAK6R,GAAO7R,GAAGgE,UCDpD,IAAIxH,EAAIiD,YAAYiQ,GAAgB,YDMlC,IADAnT,IAAMuV,EAAalS,SAASG,iBAAiB4P,IACpC3P,EAAI,EAAGA,EAAI8R,EAAW7S,OAAQe,IAAK6R,GAAO7T,KAAK,IAAIgS,GAAM8B,EAAW9R,KAE7EvD,OAAOqD,iBAAiB,SAAUkE,IAClCvH,OAAOqD,iBAAiB,oBAAqBkE,IAC7CA,QERF,IAAM+N,8JACJ1O,eAAOnG,GACLqJ,YAAMlD,gBAAMnG,GACRmB,KAAKmF,cACPnF,KAAKf,QAAQ+G,aAAa,WAAYnH,EAAQ,IAAM,UAJlCV,EAAI8G,kBCLtB0O,GAAgBxV,EAAIE,GAAGG,SAAS,QAChCoV,GAAazV,EAAIE,GAAG,QACpBwV,GAAY1V,EAAIE,GAAG,aACnByV,GAAc3V,EAAIE,GAAG,eACrB0V,GAAa5V,EAAIE,GAAG,cCCpB2V,eACJ,WAAarQ,EAAI1E,GACfiJ,YAAMvE,EAAI1E,GACVe,KAAKiU,KAAOhV,EAAQyO,kBAAkBqG,IAEtC9U,EAAQwC,iBAAiB,gBAAiBzB,KAAKmI,cAAc9H,KAAKL,OAElEA,KAAK+N,SACL5P,EAAIgD,OAAOL,SAASR,IAAIN,KAAKI,OAAOC,KAAKL,wIAG3C4G,EAAWpI,wBAAc,OAAOoV,gBAEhCzL,uBAAetF,GACb7C,KAAKf,QAAQmJ,MAAM8L,WAAa,oBAGlCnG,kBACE/N,KAAKgO,YAAc,IAAI7P,EAAIyD,YAAY5B,KAAKf,SAC5Ce,KAAKgO,YAAY9L,KAAK/D,EAAIyD,YAAY0B,MAAOtD,KAAKmU,gBAAgB9T,KAAKL,OAAO,GAAM,GACpFA,KAAKgO,YAAY9L,KAAK/D,EAAIyD,YAAYwB,KAAMpD,KAAKoU,eAAe/T,KAAKL,OAAO,GAAM,GAClFA,KAAKgO,YAAY9L,KAAK/D,EAAIyD,YAAYuB,KAAMnD,KAAK8J,UAAUzJ,KAAKL,OAAO,GAAM,GAC7EA,KAAKgO,YAAY9L,KAAK/D,EAAIyD,YAAYsB,IAAKlD,KAAK+J,SAAS1J,KAAKL,OAAO,GAAM,gBAO7EmU,2BACM5S,SAAS8F,cAAc1C,UAAUC,SAASiP,MACxC7T,KAAKR,MAAQQ,KAAKY,OAAS,EAC7BZ,KAAKR,QAELQ,KAAKR,MAAQ,EAGfQ,KAAKuH,sBAQT6M,0BACM7S,SAAS8F,cAAc1C,UAAUC,SAASiP,MACxC7T,KAAKR,MAAQ,EACfQ,KAAKR,QAELQ,KAAKR,MAAQQ,KAAKY,OAAS,EAG7BZ,KAAKuH,sBAOTuC,qBACMvI,SAAS8F,cAAc1C,UAAUC,SAASiP,MAC5C7T,KAAKR,MAAQ,EACbQ,KAAKuH,sBAOTwC,oBACMxI,SAAS8F,cAAc1C,UAAUC,SAASiP,MAC5C7T,KAAKR,MAAQQ,KAAKY,OAAS,EAC3BZ,KAAKuH,sBAITA,iBACMvH,KAAK8E,SAAS9E,KAAK8E,QAAQyC,qBAGjCvC,eAAOnG,EAAOoI,GACZ,IAAKnI,IAAI6C,EAAI,EAAGA,EAAI3B,KAAK6D,OAAQlC,IAAK3B,KAAK4D,QAAQjC,GAAG0S,WAAW,EAAGpN,GACpEjH,KAAK8E,QAAQ7F,QAAQmJ,MAAMkM,UAAY,GACvC,IAAKxV,IAAI6C,EAAI3B,KAAK6D,OAAS,EAAGlC,EAAI3B,KAAKY,OAAQe,IAAK3B,KAAK4D,QAAQjC,GAAG0S,UAAU,EAAGpN,GACjFjH,KAAKf,QAAQmJ,MAAM8L,WAAa,gBAGlC5T,aAAKiU,GAEH,GADArM,YAAM5H,cAAIiU,GACU,IAAhBvU,KAAKY,QAAgB2T,EAAIxP,UAAW/E,KAAK8E,QAAUyP,MAClD,CACHrW,IAAMsB,EAAQQ,KAAK4D,QAAQnE,QAAQ8U,GAC/BvU,KAAK6D,QAAU,GAAK7D,KAAK6D,SAAWrE,IAAO+U,EAAItV,QAAQmJ,MAAMkM,UAAY,eAAc9U,EAAQQ,KAAK6D,QAAU,IAAM,yBAI5HzD,kBACE,GAAqB,OAAjBJ,KAAK8E,QAAT,CACA5G,IAAMsW,EAAaC,KAAKC,MAAM1U,KAAK8E,QAAQ7F,QAAQuJ,cAC/CxI,KAAK2U,cAAgBH,IACzBxU,KAAK2U,YAAcH,EACnBxU,KAAKf,QAAQmJ,MAAMG,OAAUvI,KAAK2U,YAAc3U,KAAKiU,KAAKzL,aAAgB,wCAtGtDrK,EAAIuF,kBCGtBkR,mPACJhO,EAAW7E,oBAAU,OAAO5D,EAAIqJ,iBAAiBE,QACjDd,EAAWpI,wBAAc,OAAOsV,IAEhClM,EAAIpD,gCAAsB,OAAOwP,gBAEjClN,uBAAe7H,GACb,OAAO,IAAIyU,GAAUzU,EAASe,mBAGhCqU,mBAAWQ,EAAW5N,GAChBA,IAASjH,KAAKf,QAAQmJ,MAAM8L,WAAa,QAC7ClU,KAAKf,QAAQmJ,MAAMkM,UAAY,aAAyB,IAAZO,OACxC5N,IAASjH,KAAKf,QAAQmJ,MAAM8L,WAAa,iBAG/ChN,iBACElH,KAAKgE,MAAMxE,MAAQ,0EAjBLrB,EAAI+H,YCLtB/H,EAAIyW,IAAMA,GACVzW,EAAIuV,UAAYA,GAChBvV,EAAI6V,UAAYA,GCFhB,IAAI7V,EAAIiD,YAAYuS,GAAe,YCCjCiB,GAAIpO,MAAMjF,aCJZrD,IAAM4W,GAAkB3W,EAAIE,GAAGG,SAAS,UAClCuW,GAAwB5W,EAAIE,GAAGG,SAAS,iBACxCwW,GAAgCD,OAAyB5W,EAAIE,GAAGG,SAAS,cACzEyW,GAA+BF,OAAyB5W,EAAIE,GAAGG,SAAS,aACxE0W,GAAsB/W,EAAIE,GAAGG,SAAS,OACtC2W,GAA8BD,OAAuB/W,EAAIE,GAAGG,SAAS,aCEvE4W,GAAQ,EAENC,GACJ,SAAaC,GACXtV,KAAKsV,OAASA,GAAU/T,SAASmM,cAAcoH,IAC/C9U,KAAKuV,MAAQH,GACbA,KAEApV,KAAKmQ,qBAGPA,gBACEnQ,KAAKwV,OAAS,GAEdxV,KAAKyV,MAAQzV,KAAKsV,OAAO5H,cAAcqH,IAEvC/U,KAAK0V,UAAY1V,KAAKsV,OAAO5H,cAAcsH,IAE3ChV,KAAK2V,IAAM3V,KAAKsV,OAAO5H,cAAcwH,IAErClV,KAAK4V,UAAY5V,KAAKsV,OAAO5H,cAAcuH,IAE3CjV,KAAKoP,QAAUpP,KAAKsV,OAAO5H,cAAcyH,IAEzCnV,KAAK6I,SAAW7I,KAAK2F,OAAOtF,KAAKL,MAEjC5B,OAAOqD,iBAAiB,SAAUzB,KAAK6I,UACvCzK,OAAOqD,iBAAiB,oBAAqBzB,KAAK6I,UAClD7I,KAAK2F,uBAGPA,kBACE3F,KAAK6V,QAAUzX,OAAOmS,WAAW,qBAAqBC,QAEtD,IAAK1R,IAAI6C,EAAI,EAAGA,EAAI3B,KAAKwV,OAAO5U,OAAQe,IAAK3B,KAAKwV,OAAO7T,GAAGgE,OAAO3F,KAAK6V,SAEjD,OAAnB7V,KAAK4V,YACH5V,KAAK6V,QACgB,OAAnB7V,KAAK0V,UAAoB1V,KAAKyV,MAAM7C,aAAa5S,KAAK4V,UAAW5V,KAAK0V,WACrE1V,KAAKyV,MAAM5C,YAAY7S,KAAK4V,WAEjC5V,KAAK2V,IAAI/C,aAAa5S,KAAK4V,UAAW5V,KAAKoP,WC/CnDjR,EAAIkX,OAASA,GCEb,IAAIlX,EAAIiD,YAAY0T,GAAiB,YCGnC,IAJA5W,IAEM4X,EAAU,SAFCpP,MAAMC,UAAUhG,MAAMD,KAAKa,SAASG,iBAAiBoT,sBAIjE5W,IAAMe,OAAqB6W,EAAQnW,KAAK,IAAI0V,GAAOpW"}