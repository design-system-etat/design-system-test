/*! DSFR v0.5.5 | licence MIT */
const t=window.dsfr||{};window.dsfr=t;const e=t=>`rf-${t}`;e.selector=(t,s)=>(void 0===s&&(s="."),`${s}${e(t)}`),(e.attr=(t,s,i)=>`data-${e(t)}`).selector=(t,s)=>{let i=e.attr(t);return void 0!==s&&(i+=`="${s}"`),`[${i}]`};const s=(t,e,s)=>{"."===e.charAt(0)&&(e=e.substr(1));const i=t.className.split(" "),n=i.indexOf(e);!0===s?n>-1&&i.splice(n,1):-1===n&&i.push(e),t.className=i.join(" ")},i=(t,e)=>s(t,e),n=(t,e)=>s(t,e,!0);class r{constructor(){this.closures=[],this.nexts=[],this.rendering=this.render.bind(this),this.render()}add(t){this.closures.push(t);return()=>{const e=this.closures.indexOf(t);-1!==e&&this.closures.splice(e,1)}}next(t){this.nexts.push(t)}render(){window.requestAnimationFrame(this.rendering);for(const t of this.closures)t.call();const t=this.nexts.slice();this.nexts.length=0;for(const e of t)e.call()}}const o=new class{constructor(){this.renderer=new r}register(t,e){}start(){}stop(){}};class h{constructor(t,e){this.selector=t,this.builders=e,this.instances=[],"loading"!==document.readyState?window.requestAnimationFrame(this.start.bind(this)):document.addEventListener("DOMContentLoaded",this.start.bind(this))}start(){if(!(this.instances.length>0)&&document.querySelectorAll(this.selector).length>0)for(let t=0;t<this.builders.length;t++)this.instances.push(this.builders[t]())}}class l{constructor(t){this.element=t,this.collections={}}_add(t,e){void 0===this.collections[t]&&(this.collections[t]=new c(t,this.element)),this.collections[t].add(e)}down(t,e,s,i){this._add("down",new a(t,e,s,i))}up(t,e,s,i){this._add("up",new a(t,e,s,i))}dispose(){for(const t of this.collections)t.dispose();this.types=null}}class c{constructor(t,e){this.type=t,this.element=e,this.actions=[],this.binding=this.handle.bind(this),this.element.addEventListener("key"+t,this.binding)}add(t){this.actions.push(t)}handle(t){for(const e of this.actions)e.handle(t)}dispose(){this.element.removeEventListener("key"+this.type,this.binding),this.actions=null}}class a{constructor(t,e,s,i){this.key=t,this.closure=e,this.preventDefault=!0===s,this.stopPropagation=!0===i}handle(t){t.keyCode===this.key&&(this.closure(t),this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation())}}l.TAB=9,l.ESCAPE=27,l.END=35,l.HOME=36,l.LEFT=37,l.UP=38,l.RIGHT=39,l.DOWN=40;const u=e.attr("group"),d=[];class p{constructor(t,e){this.id=t,this.element=e,this.members=[],this._index=-1,this._current=null,d.push(this)}static getGroupById(t){for(const e of d)if(e.constructor===this&&e.id===t)return e;return new this(t)}static getGroupByElement(t){for(const e of d)if(e.element===t)return e;return new this(!1,t)}static groupById(t,e){const s=t.element.getAttribute(u);if(null===s)return;e.getGroupById(s).add(t)}static groupByParent(t,e,s){if(void 0===s&&(s=e.selector),""===s)return;let i=t.element.parentElement;for(;i;){if(i.classList.contains(t.constructor.selector))return;if(i.classList.contains(s)){return void e.getGroupByElement(i).add(t)}i=i.parentElement}}static get selector(){return""}add(t){if(-1===this.members.indexOf(t))switch(this.members.push(t),t.setGroup(this),!0){case null!==this.current:case!t.disclosed:t.apply(!1,!0);break;default:this._current=t,this._index=this.members.indexOf(t),t.apply(!0,!0)}}get length(){return this.members.length}get index(){return this._index}set index(t){t<-1||t>=this.length||this._index===t||(null!==this.current&&this.current.apply(!1),this._index=t,this._current=this._index>-1?this.members[this._index]:null,null!==this.current&&this.current.apply(!0),this.apply())}get current(){return this._current}set current(t){this.index=this.members.indexOf(t)}apply(){}}class m{constructor(t,e){this.element=t,this.disclosure=e,this.hasAttribute=this.element.hasAttribute(this.disclosure.attributeName),this.element.addEventListener("click",this.click.bind(this)),this.observer=new MutationObserver(this.mutate.bind(this)),this.observe()}observe(){this.observer.observe(this.element,{attributes:!0})}click(t){this.disclosure.change(this.hasAttribute)}mutate(t){t.forEach((t=>{"attributes"===t.type&&t.attributeName===this.disclosure.attributeName&&this.disclosure.change(this.disclosed)}))}apply(t){this.hasAttribute&&(this.observer&&this.observer.disconnect(),this.element.setAttribute(this.disclosure.attributeName,t),this.observer&&this.observe())}get disclosed(){return"true"===this.element.getAttribute(this.disclosure.attributeName)}}const g=[];class y{constructor(t){this.element=t,this.id=t.id,this.buttons=[],this.disclosed=null,this._selector=this.constructor.selector,this.modifier=this._selector+"--"+this.type.id,this.attributeName=this.type.aria?"aria-"+this.type.id:e.attr(this.type.id);const s=document.querySelectorAll(this.type.aria?`[aria-controls="${this.id}"]`:e.attr.selector("controls",this.id));if(s.length>0)for(let t=0;t<s.length;t++)this.addButton(s[t]);this.disclosed=!0===this.disclosed,this.apply(this.disclosed,!0),this.group()}group(){p.groupById(this,this.GroupConstructor),p.groupByParent(this,this.GroupConstructor)}static build(t){const e=Array.prototype.slice.call(t.querySelectorAll(`.${this.selector}`));for(const t of e)g.push(new this(t))}get type(){return this.constructor.type}static get type(){return null}static get selector(){return""}addButton(t){const e=this.buttonFactory(t);e.hasAttribute&&(null===this.disclosed?this.disclosed=e.disclosed:e.apply(this.disclosed)),this.buttons.push(e)}get GroupConstructor(){return p}buttonFactory(t){return new m(t,this)}disclose(){this.disclosed||(void 0!==this.group&&(this.group.current=this),this.apply(!0))}conceal(){this.disclosed&&(void 0!==this.group&&(this.group.current=null),this.apply(!1))}apply(t,e){this.disclosed=t,t?i(this.element,this.modifier):n(this.element,this.modifier);for(let e=0;e<this.buttons.length;e++)this.buttons[e].apply(t);if(!t)for(const t of g)t!==this&&this.element.contains(t.element)&&t.reset()}reset(){}change(t){if(this.constructor.type.canConceal)switch(!0){case!t:case this.disclosed:this.conceal();break;default:this.disclose()}else this.disclose()}setGroup(t){this.group=t}get hasFocus(){return this.element===document.activeElement||(this.element.querySelectorAll(":focus").length>0||!!this.buttons.some((t=>t.hasFocus)))}focus(){for(let t=0;t<this.buttons.length;t++){const e=this.buttons[t];if(e.hasAttribute)return void e.element.focus()}}}const b={expand:{id:"expanded",aria:!0,canConceal:!0},select:{id:"selected",aria:!0,canConceal:!1}};class f extends m{get hasFocus(){return this.element===document.activeElement}}const v={};class x extends p{get hasFocus(){return void 0===this.current?null:this.current.hasFocus}static register(t,e){v[t]=e}static get ascendants(){return v}}const w=e("collapse");class E extends y{constructor(t){super(t),t.addEventListener("transitionend",this.transitionend.bind(this))}group(){for(const t in x.ascendants){let e=this.element.parentElement;for(;e;){if(e.classList.contains(t))return void("string"==typeof x.ascendants[t]?p.groupByParent(this,x,x.ascendants[t]):p.groupByParent(this,x.ascendants[t]));e=e.parentElement}}super.group()}get GroupConstructor(){return x}buttonFactory(t){return new f(t,this)}static get type(){return b.expand}static get selector(){return w}transitionend(t){this.disclosed||(this.element.style.maxHeight="")}apply(t,e){t&&(this.element.style.maxHeight="none"),this.element.style.setProperty("--collapser","none");const s=this.element.offsetHeight;this.element.style.setProperty("--collapse",-s+"px"),this.element.style.setProperty("--collapser",""),window.requestAnimationFrame((()=>super.apply(t,e)))}reset(){this.apply(!1)}get buttonHasFocus(){return!!this.buttons.some((t=>t.hasFocus))}get hasFocus(){return this.element===document.activeElement||(this.element.querySelectorAll(":focus").length>0||this.buttonHasFocus)}}t.ns=e,t.addClass=i,t.removeClass=n,t.engine=o,t.Initializer=h,t.KeyListener=l,t.Disclosure=y,t.DisclosureButton=m,t.DisclosuresGroup=p,t.DISCLOSURE_TYPES=b,t.Collapse=E,t.CollapseButton=f,t.CollapsesGroup=x,t.Equisized=class{constructor(t,e){this.selector=t,this.group=e,this.elements=this.group.querySelectorAll(this.selector),this.maxWidth=0,this.changing=this.change.bind(this),window.addEventListener("resize",this.changing),window.addEventListener("load",this.changing)}change(){this.reset();for(let t=0;t<this.elements.length;t++){const e=this._getWidth(this.elements[t]);e>this.maxWidth&&(this.maxWidth=e)}this.apply()}apply(){for(let t=0;t<this.elements.length;t++)this.elements[t].style.width=this.maxWidth+1+"px"}reset(){for(let t=0;t<this.elements.length;t++)this.elements[t].style.width="auto";this.maxWidth=0}_getWidth(t){let e=t.offsetWidth;const s=getComputedStyle(t);return e+=parseInt(s.marginLeft)+parseInt(s.marginRight),e}};new h(`.${w}`,[()=>{E.build(document)}]);
//# sourceMappingURL=core.module.min.js.map
