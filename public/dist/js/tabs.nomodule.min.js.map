{"version":3,"file":"tabs.nomodule.min.js","sources":["../../packages/core/generated/scripts/config.js","../../packages/core/api.js","../../packages/tabs/src/scripts/tabs/tab-button.js","../../packages/tabs/src/scripts/tabs/constants.js","../../packages/tabs/src/scripts/tabs/tabs-group.js","../../packages/tabs/src/scripts/tabs/tab.js","../../packages/tabs/index.js","../../packages/tabs/src/scripts/module.js","../../packages/tabs/src/scripts/tabs/build.js"],"sourcesContent":["export const prefix = 'rf';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || {};\nwindow[namespace] = api;\nexport default api;\n","import api from '../../../api';\n\n/**\n  * TabButton correspond au bouton cliquable qui change le panel\n  * TabButton étend de DisclosureButton qui ajoute/enelve l'attribut aria-selected,\n  * Et change l'attributte tabindex a 0 si le boutton est actif (value=true), -1 s'il n'est pas actif (value=false)\n */\nclass TabButton extends api.DisclosureButton {\n  apply (value) {\n    super.apply(value);\n    if (this.hasAttribute) {\n      this.element.setAttribute('tabindex', value ? '0' : '-1');\n    }\n  }\n}\n\nexport { TabButton };\n","import api from '../../../api.js';\n\nconst TABS_SELECTOR = api.ns.selector('tabs');\nconst TABS_CLASS = api.ns('tabs');\nconst TAB_CLASS = api.ns('tabs__tab');\nconst PANEL_CLASS = api.ns('tabs__panel');\nconst LIST_CLASS = api.ns('tabs__list');\n\nconst TRANSITION_TIME = 100;\n\nexport { TABS_SELECTOR, TABS_CLASS, TAB_CLASS, PANEL_CLASS, LIST_CLASS, TRANSITION_TIME };\n","import api from '../../../api.js';\nimport { LIST_CLASS, TAB_CLASS, TABS_CLASS } from './constants';\n\n/**\n* TabGroup est la classe étendue de DiscosuresGroup\n* Correspond à un objet Tabs avec plusieurs tab-button & Tab (panel)\n*/\nclass TabsGroup extends api.DisclosuresGroup {\n  constructor (id, element) {\n    super(id, element);\n    this.list = element.querySelector(`.${LIST_CLASS}`);\n\n    element.addEventListener('transitionend', this.transitionend.bind(this));\n\n    this.listen();\n    api.engine.renderer.add(this.render.bind(this));\n  }\n\n  static get selector () { return TABS_CLASS; }\n\n  transitionend (e) {\n    this.element.style.transition = 'none';\n  }\n\n  listen () {\n    this.keyListener = new api.KeyListener(this.element);\n    this.keyListener.down(api.KeyListener.RIGHT, this.arrowRightPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.LEFT, this.arrowLeftPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.HOME, this.homePress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.END, this.endPress.bind(this), true, true);\n  }\n\n  /**\n   * Selectionne l'element suivant de la liste si on est sur un bouton\n   * Si on est à la fin on retourne au début\n   */\n  arrowRightPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index < this.length - 1) {\n        this.index++;\n      } else {\n        this.index = 0;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne l'element précédent de la liste si on est sur un bouton\n   * Si on est au debut retourne a la fin\n   */\n  arrowLeftPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index > 0) {\n        this.index--;\n      } else {\n        this.index = this.length - 1;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le permier element de la liste si on est sur un bouton\n   */\n  homePress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = 0;\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le dernier element de la liste si on est sur un bouton\n   */\n  endPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = this.length - 1;\n      this.focus();\n    }\n  };\n\n  focus () {\n    if (this.current) this.current.focus();\n  }\n\n  apply (value, initial) {\n    for (let i = 0; i < this._index; i++) this.members[i].translate(-1, initial);\n    this.current.element.style.transform = '';\n    for (let i = this._index + 1; i < this.length; i++) this.members[i].translate(1, initial);\n    this.element.style.transition = '';\n  }\n\n  add (tab) {\n    super.add(tab);\n    if (this.length === 1 || tab.disclosed) this.current = tab;\n    else {\n      const index = this.members.indexOf(tab);\n      if (this._index > -1 && this._index !== index) tab.element.style.transform = `translateX(${index < this._index ? -100 : 100}%)`;\n    }\n  }\n\n  render () {\n    if (this.current === null) return;\n    const paneHeight = Math.round(this.current.element.offsetHeight);\n    if (this.panelHeight === paneHeight) return;\n    this.panelHeight = paneHeight;\n    this.element.style.height = (this.panelHeight + this.list.offsetHeight) + 'px';\n  }\n}\n\nexport { TabsGroup };\n","import api from '../../../api.js';\nimport { TabButton } from './tab-button.js';\nimport { PANEL_CLASS } from './constants.js';\nimport { TabsGroup } from './tabs-group.js';\n\n/**\n  * Tab coorespond au panel d'un élement Tabs (tab panel)\n  * Tab étend disclosure qui ajoute/enleve le modifier --selected,\n  * et ajoute/eleve l'attribut hidden, sur le panel\n  */\nclass Tab extends api.Disclosure {\n  static get type () { return api.DISCLOSURE_TYPES.select; }\n  static get selector () { return PANEL_CLASS; }\n\n  get GroupConstructor () { return TabsGroup; }\n\n  buttonFactory (element) {\n    return new TabButton(element, this);\n  }\n\n  translate (direction, initial) {\n    if (initial) this.element.style.transition = 'none';\n    this.element.style.transform = `translate(${direction * 100}%)`;\n    if (initial) this.element.style.transition = '';\n  }\n\n  reset () {\n    this.group.index = 0;\n  }\n}\n\nexport { Tab };\n","import api from './api.js';\nimport { Tab } from './src/scripts/tabs/tab.js';\nimport { TabButton } from './src/scripts/tabs/tab-button.js';\nimport { TabsGroup } from './src/scripts/tabs/tabs-group';\n\napi.Tab = Tab;\napi.TabButton = TabButton;\napi.TabsGroup = TabsGroup;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { build } from './tabs/build.js';\nimport { TABS_SELECTOR } from './tabs/constants.js';\n\nnew api.Initializer(TABS_SELECTOR, [build]);\n","import { Tab } from './tab';\n\n/**\n* Initialise tout les éléments Tab dans la page\n*/\nconst build = () => {\n  Tab.build(document);\n};\n\nexport { build };\n"],"names":["const","api","window","TabButton","apply","value","super","this","hasAttribute","element","setAttribute","DisclosureButton","TABS_SELECTOR","ns","selector","TABS_CLASS","TAB_CLASS","PANEL_CLASS","LIST_CLASS","TabsGroup","id","list","querySelector","addEventListener","transitionend","bind","listen","engine","renderer","add","render","staticAccessors","e","style","transition","keyListener","KeyListener","down","RIGHT","arrowRightPress","LEFT","arrowLeftPress","HOME","homePress","END","endPress","document","activeElement","classList","contains","index","length","focus","current","initial","let","i","_index","members","translate","transform","tab","disclosed","indexOf","paneHeight","Math","round","offsetHeight","panelHeight","height","DisclosuresGroup","Tab","type","DISCLOSURE_TYPES","select","prototypeAccessors","GroupConstructor","buttonFactory","direction","reset","group","Disclosure","Initializer","build"],"mappings":"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"}